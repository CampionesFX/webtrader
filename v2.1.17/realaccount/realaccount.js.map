{"version":3,"sources":["../../../../src/realaccount/realaccount.es6"],"names":["real_win","real_win_view","real_win_li","error_handler","err","console","error","growl","message","init","li","click","getLandingCompany","then","what_todo","init_real_win","catch","moveToTop","root","i18n","_title","createBlankWindow","title","resizable","collapsable","minimizable","maximizable","width","height","close","dialog","trigger","remove","open","destroy","unbind","init_state","offset","top","my","left","at","css","app_id","state","route","value","empty_fields","validate","clear","debounce","show","input_disabled","risk","visible","user","disabled","accepted","pep","salutation","salutation_array","first_name","last_name","date_of_birth","yearRange","showButtonPanel","residence","residence_name","address_line_1","address_line_2","city_address","state_address","state_address_array","text","address_postcode","phone","secret_question_inx","secret_question_array","secret_answer","place_of_birth","country_array","tax_residence","tax_identification_number","financial","experience_array","frequency_array","account_opening_reason_array","account_opening_reason","forex_trading_experience","forex_trading_frequency","indices_trading_experience","indices_trading_frequency","commodities_trading_experience","commodities_trading_frequency","stocks_trading_experience","stocks_trading_frequency","other_derivatives_trading_experience","other_derivatives_trading_frequency","other_instruments_trading_experience","other_instruments_trading_frequency","employment_industry_array","employment_industry","education_level_array","education_level","income_source_array","income_source","net_income_array","net_income","estimated_worth_array","estimated_worth","account_turnover_array","account_turnover","occupation_array","occupation","local_storage","get","reduce","a","b","test","id","is_valid","isValid","new_account_real","update","request","undefined","address_city","address_state","secret_question","replace","send","data","info","oauth","push","client_id","token","oauth_token","is_virtual","set","notice","switch_account","hide","create_request","new_account_maltainvest","join","affiliate_token","accept_risk","warn","accept","decline","bind","residence_promise","get_settings","unix","format","subtract","country_code","country","cached","residence_list","find","phone_idd","states_list","log"],"mappings":"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","file":"realaccount.js","sourcesContent":["/*\n * Created by amin on June 14, 2016.\n */\n\nimport $ from 'jquery';\nimport liveapi from 'websockets/binary_websockets';\nimport windows from 'windows/windows';\nimport rv from 'common/rivetsExtra';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport navigation from 'navigation/navigation';\nimport html from 'text!realaccount/realaccount.html';\nimport 'css!realaccount/realaccount.css';\n\nlet real_win = null;\nlet real_win_view = null; // rivets view\nlet real_win_li = null;\n\nconst error_handler = (err) => {\n   console.error(err);\n   $.growl.error({ message: err.message });\n};\n\nexport const init = (li) => {\n   real_win_li = li;\n   li.click(() => {\n      if (!real_win) {\n         navigation.getLandingCompany()\n            .then(\n               (what_todo) => init_real_win(html, what_todo)\n            )\n            .catch(error_handler);\n      } else {\n         real_win.moveToTop();\n      }\n   });\n}\n\nconst init_real_win = (root, what_todo) => {\n   root = $(root).i18n();\n   const _title = {\n      'upgrade-mlt': 'Real Money Account Opening'.i18n(),\n      'upgrade-mf': 'Financial Account Opening form'.i18n()\n   }[what_todo];\n\n   real_win = windows.createBlankWindow(root, {\n      title: _title,\n      resizable: false,\n      collapsable: false,\n      minimizable: true,\n      maximizable: false,\n      width: 360,\n      height: 'auto',\n      'data-authorized': true,\n      close: () => {\n         real_win.dialog('destroy');\n         real_win.trigger('dialogclose'); // TODO: figure out why event is not fired.\n         real_win.remove();\n         real_win = null;\n      },\n      open: () => {},\n      destroy: () => {\n         real_win_view && real_win_view.unbind();\n         real_win_view = null;\n      }\n   });\n\n   init_state(root, what_todo);\n   real_win.dialog('open');\n\n   /* update dialog position, this way when dialog is resized it will not move*/\n   const offset = real_win.dialog('widget').offset();\n   offset.top = 110;\n   real_win.dialog(\"option\", \"position\", { my: offset.left, at: offset.top });\n   real_win.dialog('widget').css({\n      left: offset.left + 'px',\n      top: offset.top + 'px'\n   });\n}\n\nconst init_state = (root, what_todo) => {\n   const app_id = liveapi.app_id;\n   const state = {\n      route: { value: 'user' }, // routes: ['user', 'financial']\n      empty_fields: {\n         validate: false,\n         clear: _.debounce(() => {\n            state.empty_fields.validate = false;\n         }, 4000),\n         show: () => {\n            state.empty_fields.validate = true;\n            state.empty_fields.clear();\n         }\n      },\n      what_todo: what_todo,\n      input_disabled: false,\n      risk: {\n         visible: false,\n      },\n      user: {\n         disabled: false,\n         accepted: what_todo === 'upgrade-mf',\n         pep: false,\n         salutation: 'Mr',\n         salutation_array: ['Mr', 'Mrs', 'Ms', 'Miss'],\n         first_name: '',\n         last_name: '',\n         date_of_birth: '',\n         yearRange: \"-100:+0\",\n         showButtonPanel: false, // for jquery ui datepicker\n         residence: '-',\n         residence_name: '-',\n         address_line_1: '',\n         address_line_2: '',\n         city_address: '',\n         state_address: '-',\n         state_address_array: [{ text: '-', value: '-' }],\n         address_postcode: '',\n         phone: '',\n         secret_question_inx: 5,\n         secret_question_array: [\n            'Mother\\'s maiden name', 'Name of your pet', 'Name of first love',\n            'Memorable town/city', 'Memorable date', 'Favourite dish',\n            'Brand of first car', 'Favourite artist'\n         ],\n         secret_answer: '',\n         place_of_birth: '-',\n         country_array: [{ text: '-', value: '-' }],\n         tax_residence: '',\n         tax_identification_number: ''\n\n      },\n      financial: {\n         experience_array: ['0-1 year', '1-2 years', 'Over 3 years'],\n         frequency_array: ['0-5 transactions in the past 12 months', '6-10 transactions in the past 12 months', '40 transactions or more in the past 12 months'],\n         account_opening_reason_array: ['Speculative', 'Income Earning', 'Assets Saving', 'Hedging'],\n\n         account_opening_reason: '',\n         forex_trading_experience: '',\n         forex_trading_frequency: '',\n         indices_trading_experience: '',\n         indices_trading_frequency: '',\n         commodities_trading_experience: '',\n         commodities_trading_frequency: '',\n         stocks_trading_experience: '',\n         stocks_trading_frequency: '',\n         other_derivatives_trading_experience: '',\n         other_derivatives_trading_frequency: '',\n         other_instruments_trading_experience: '',\n         other_instruments_trading_frequency: '',\n\n         employment_industry_array: ['Construction', 'Education', 'Finance', 'Health', 'Tourism', 'Other'],\n         employment_industry: '',\n         education_level_array: ['Primary', 'Secondary', 'Tertiary'],\n         education_level: '',\n\n         income_source_array: ['Salaried Employee', 'Self-Employed', 'Investments & Dividends', 'Pension', 'Other'],\n         income_source: '',\n\n         net_income_array: ['Less than $25,000', '$25,000 - $50,000', '$50,001 - $100,000', '$100,001 - $500,000', 'Over $500,000'],\n         net_income: '',\n\n         estimated_worth_array: ['Less than $100,000', '$100,000 - $250,000', '$250,001 - $500,000', '$500,001 - $1,000,000', 'Over $1,000,000'],\n         estimated_worth: '',\n\n         account_turnover_array: ['Less than $25,000', '$25,000 - $50,000', '$50,001 - $100,000', '$100,001 - $500,000', 'Over $500,000'],\n         account_turnover: '',\n\n         occupation_array: [\"Chief Executives, Senior Officials and Legislators\", \"Managers\", \"Professionals\", \"Clerks\",\n            \"Personal Care, Sales and Service Workers\", \"Agricultural, Forestry and Fishery Workers\",\n            \"Craft, Metal, Electrical and Electronics Workers\", \"Plant and Machine Operators and Assemblers\",\n            \"Mining, Construction, Manufacturing and Transport Workers\", \"Armed Forces\", \"Government Officers\",\n            \"Others\"\n         ],\n         occupation: '',\n\n         accepted: false,\n         disabled: false\n      }\n   };\n\n   state.input_disabled = local_storage.get(\"oauth\").reduce((a,b)=>{\n         return a || /MLT/.test(b.id)\n      },false) && what_todo === \"upgrade-mf\";\n\n   state.user.is_valid = () => {\n      const user = state.user;\n      return user.first_name !== '' &&\n         !/[~`!@#\\$%\\^\\&\\*\\(\\)\\+=\\{\\}\\[\\]\\\\|:;\\\",<>?/\\d]/.test(user.first_name) &&\n         user.last_name !== '' &&\n         !/[~`!@#\\$%\\^\\&\\*\\(\\)\\+=\\{\\}\\[\\]\\\\|:;\\\",<>?/\\d]/.test(user.last_name) &&\n         moment(user.date_of_birth, 'YYYY-MM-DD', true).isValid() &&\n         user.residence !== '-' &&\n         user.address_line_1 !== '' &&\n         !/[~`!#\\$%\\^\\&\\*\\(\\)\\+=\\{\\}\\[\\]\\\\|:;\\\"<>?]/.test(user.address_line_1) &&\n         !/[~`!#\\$%\\^\\&\\*\\(\\)\\+=\\{\\}\\[\\]\\\\|:;\\\"<>?]/.test(user.address_line_2) &&\n         user.city_address !== '' &&\n         !/[~`!@#\\$%\\^\\&\\*\\(\\)\\+=\\{\\}\\[\\]\\\\|:;\\\",<>?/\\d]/.test(user.city_address) &&\n         /^[^+]{0,20}$/.test(user.address_postcode) &&\n         user.phone !== '' && /^\\+?[0-9\\s]{6,35}$/.test(user.phone) &&\n         (state.input_disabled || /.{4,8}$/.test(user.secret_answer)) && // Check secret answer if mlt account\n         (state.what_todo != \"upgrade-mf\" || (state.user.place_of_birth &&\n            state.user.tax_residence && state.user.tax_identification_number && /^[\\w-]{0,20}$/.test(state.user.tax_identification_number)));\n   };\n\n   state.user.click = () => {\n      if (!state.user.is_valid()) {\n         state.empty_fields.show();\n         return;\n      }\n\n      if (state.what_todo === 'upgrade-mlt') {\n         state.user.new_account_real();\n         return;\n      }\n\n      state.route.update('financial');\n   }\n   state.user.new_account_real = () => {\n\n      const user = state.user;\n      const request = {\n         new_account_real: 1,\n         salutation: user.salutation,\n         first_name: user.first_name,\n         last_name: user.last_name,\n         date_of_birth: user.date_of_birth,\n         residence: user.residence,\n         address_line_1: user.address_line_1,\n         address_line_2: user.address_line_2 || undefined, // optional field\n         address_city: user.city_address,\n         address_state: user.state_address || undefined,\n         address_postcode: user.address_postcode || undefined,\n         phone: user.phone,\n         secret_question: user.secret_question_array[user.secret_question_inx],\n         secret_answer: user.secret_answer.replace('\"\"', \"'\")\n      };\n\n      state.user.disabled = true;\n      liveapi.send(request)\n         .then((data) => {\n            state.user.disabled = false;\n            const info = data.new_account_real;\n            const oauth = local_storage.get('oauth');\n            oauth.push({ id: info.client_id, token: info.oauth_token, is_virtual: 0 });\n            local_storage.set('oauth', oauth);\n            $.growl.notice({ message: 'Account successfully created' });\n            $.growl.notice({ message: 'Switching to your new account ...' });\n            /* login with the new account */\n            return liveapi.switch_account(info.client_id)\n               .then(() => {\n                  real_win && real_win.dialog('close');\n                  real_win_li.hide();\n               });\n         })\n         .catch((err) => {\n            state.user.disabled = false;\n            error_handler(err);\n         });\n   };\n\n   state.financial.empty_fields = () => {\n      return state.financial.account_opening_reason === '' || state.financial.forex_trading_experience === '' ||\n          state.financial.forex_trading_frequency === '' || state.financial.indices_trading_experience === '' ||\n          state.financial.indices_trading_frequency === '' || state.financial.commodities_trading_experience === '' ||\n          state.financial.commodities_trading_frequency === '' || state.financial.stocks_trading_experience === '' ||\n          state.financial.stocks_trading_frequency === '' || state.financial.other_derivatives_trading_experience === '' ||\n          state.financial.other_derivatives_trading_frequency === '' || state.financial.other_instruments_trading_experience === '' ||\n          state.financial.other_instruments_trading_frequency === '' || state.financial.employment_industry === '' ||\n          state.financial.occupation === '' || state.financial.education_level === '' ||\n          state.financial.income_source === '' || state.financial.net_income === '' ||\n          state.financial.account_turnover === '' || state.financial.estimated_worth === '';\n   };\n\n   state.financial.click = () => {\n      if (state.financial.empty_fields()) {\n         state.empty_fields.show();\n         $.growl.error({ message: 'Not all financial information are completed' });\n         return;\n      }\n      if (!state.financial.accepted) {\n         $.growl.error({ message: 'Binary.com terms and conditions unchecked.' });\n         return;\n      }\n\n      state.risk.visible = true;\n   };\n   state.financial.create_request = () => {\n      const user = state.user;\n      const financial = state.financial;\n      const request = {\n         new_account_maltainvest: 1,\n         salutation: user.salutation,\n         first_name: user.first_name,\n         last_name: user.last_name,\n         date_of_birth: user.date_of_birth,\n         residence: user.residence,\n         address_line_1: user.address_line_1,\n         address_line_2: user.address_line_2 || undefined, // optional field\n         address_city: user.city_address,\n         address_state: user.state_address || undefined,\n         address_postcode: user.address_postcode || undefined,\n         phone: user.phone,\n         place_of_birth: state.user.place_of_birth,\n         tax_residence: state.user.tax_residence.join(\",\"),\n         tax_identification_number: state.user.tax_identification_number,\n\n         affiliate_token: '',\n         forex_trading_experience: financial.forex_trading_experience,\n         forex_trading_frequency: financial.forex_trading_frequency,\n         indices_trading_experience: financial.indices_trading_experience,\n         indices_trading_frequency: financial.indices_trading_frequency,\n         commodities_trading_experience: financial.commodities_trading_experience,\n         commodities_trading_frequency: financial.commodities_trading_frequency,\n         stocks_trading_experience: financial.stocks_trading_experience,\n         stocks_trading_frequency: financial.stocks_trading_frequency,\n         other_derivatives_trading_experience: financial.other_derivatives_trading_experience,\n         other_derivatives_trading_frequency: financial.other_derivatives_trading_frequency,\n         other_instruments_trading_experience: financial.other_instruments_trading_experience,\n         other_instruments_trading_frequency: financial.other_instruments_trading_frequency,\n         employment_industry: financial.employment_industry,\n         occupation: financial.occupation,\n         education_level: financial.education_level,\n         income_source: financial.income_source,\n         net_income: financial.net_income,\n         estimated_worth: financial.estimated_worth,\n         accept_risk: 1,\n      };\n      return request;\n   };\n\n   state.financial.new_account_maltainvest = () => {\n      const request = state.financial.create_request();\n      console.warn(request);\n   }\n\n   state.risk.accept = () => {\n      const request = state.financial.create_request();\n      if(!state.input_disabled) {\n         request.secret_question = state.user.secret_question_array[state.user.secret_question_inx];\n         request.secret_answer = state.user.secret_answer;\n      }\n      state.risk.visible = false;\n      state.financial.disabled = true;\n      liveapi.send(request)\n         .then((data) => {\n            const info = data.new_account_maltainvest;\n            const oauth = local_storage.get('oauth');\n            oauth.push({ id: info.client_id, token: info.oauth_token, is_virtual: 0 });\n            local_storage.set('oauth', oauth);\n            $.growl.notice({ message: 'Account successfully created' });\n            $.growl.notice({ message: 'Switching to your new account ...' });\n            /* login with the new account */\n            return liveapi.switch_account(info.client_id)\n               .then(() => {\n                  real_win && real_win.dialog('close');\n                  real_win_li.hide();\n               });\n         })\n         .catch((err) => {\n            state.financial.disabled = false;\n            error_handler(err);\n         });\n   }\n   state.risk.decline = () => {\n      state.risk.visible = false;\n   }\n\n   state.route.update = (route) => {\n      state.route.value = route;\n      //real_win.dialog('option', 'height', routes[route]);\n      real_win.dialog('widget').trigger('dialogresizestop');\n   };\n\n   real_win_view = rv.bind(root[0], state);\n\n   /* get the residence field and its states */\n   const residence_promise = liveapi.send({ get_settings: 1 })\n      .then((data) => {\n         data = data.get_settings;\n         state.user.salutation = data.salutation || state.user.salutation;\n         state.user.first_name = data.first_name || '';\n         state.user.last_name = data.last_name || '';\n         state.user.date_of_birth = data.date_of_birth ? moment.unix(data.date_of_birth).format(\"YYYY-MM-DD\") : moment().subtract(18, \"years\").format(\"YYYY-MM-DD\");\n         state.user.address_line_1 = data.address_line_1 || '';\n         state.user.address_line_2 = data.address_line_2 || '';\n         state.user.city_address = data.address_city || '';\n         state.user.state_address = data.address_state || '';\n         state.user.address_postcode = data.address_postcode || '';\n         state.user.phone = data.phone || '';\n         state.user.residence = data.country_code || '';\n         state.user.residence_name = data.country || '';\n      })\n      .catch(error_handler);\n\n   residence_promise\n      .then(\n         () => liveapi.cached.send({ residence_list: 1 })\n      )\n      .then((data) => {\n         state.user.country_array = data.residence_list;\n         state.user.place_of_birth = data.residence_list[0].value;\n         const residence = _.find(data.residence_list, { value: state.user.residence });\n         state.user.phone = state.user.phone ? state.user.phone : '+' + residence.phone_idd;\n      })\n      .catch(error_handler);\n\n   residence_promise\n      .then(\n         () => liveapi.cached.send({ states_list: state.user.residence })\n      )\n      .then((data) => {\n         console.log(data.states_list);\n         state.user.state_address_array = [{text:'Please select', value:''}, ...data.states_list];\n         state.user.state_address = state.user.state_address_array[0].value;\n      })\n      .catch(error_handler);\n}\n\nexport default { init }\n"]}