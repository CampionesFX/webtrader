{"version":3,"sources":["../../../../src/charts/chartOptions.es6"],"names":["state","view","template_manager","stringWidth","isListenerAdded","timeperiod_arr","value","name","digit","type","chartType_arr","i18n_name","local_storage","get","appURL","getAppURL","urlShareTemplate","iframeShareTemplate","twitterShareTemplate","fbShareTemplate","gPlusShareTemplate","bloggerShareTemplate","vkShareTemplate","hideOverlays","scope","showTimePeriodSelector","toggleLoadSaveSelector","toggleChartTypeSelector","toggleDrawingToolSelector","toggleExportSelector","changeChartType","chartType","newTimePeriod","newTabId","showChartTypeSelector","tableViewCallback","filter","chart","refresh","trigger","isOverlaidView","containerIDWithHash","isOverlaid","existingChart","highcharts","series","forEach","f","options","compare","showCandlestickAndOHLC","show","chartTypes","showBorder","responsiveButtons","ele","loadSaveOverlay","find","exportOverlay","timePeriodButton","chartTypeButton","css","ct","shareButton","minWidth","tp","max","isAffiliates","window","width","inst","showInstrumentName","setTitle","text","instrumentName","showChartTypeLabel","timePeriod_name","timePeriod","toUpperCase","i18n","min","positionRight","offset","left","outerWidth","calculateStringWidth","instrument_name","longTp1","reduce","a","b","length","longTp2","longCt","getWidth","string","font","obj","appendTo","remove","toggleIcon","active","cls","attr","toggleClass","split","init","m_newTabId","m_timePeriod","m_chartType","m_tableViewCb","m_instrumentName","m_instrumentCode","m_showShare","m_showOverlay","unbind","instrumentCode","indicatorsCount","overlayCount","showTableOption","enableCrosshair","showDrawingToolSelector","showExportSelector","showLoadSaveSelector","showShare","showOverlay","exportChartURLShare","format","exportChartIframeShare","fbShareLink","encodeURIComponent","twitterShareLink","gPlusShareLink","bloggerShareLink","vkShareLink","toggleTimerPeriodSelector","event","temp","originalEvent","addRemoveIndicator","title","openDialog","addRemoveOverlay","target","changeTimePeriod","dataset","timeperiod","tick","isTick","toggleCrosshair","toggleCrossHair","addDrawingTool","drawingTool","drawingtool","require","draw","refererChartID","annotate","export","exportType","exporttype","id","exportChartLocal","exportChart","generate_csv","data","on","e","get_indicators","overlay","get_overlay_count","resize","Object","keys","tab","$html","prepend","formatters","arr","item","bind","root","stopPropagation","updateOptions","s","disableEnableCandlestickAndOHLC","enable","selectChartType","generateEvent","cleanBinding","setIndicatorsCount","count","getAllChartsWithTheirTypes","map"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAmBA,QAAMA,QAAQ,EAAd;AAAA,QACIC,OAAO,EADX;AAAA,QAEIC,mBAAmB,EAFvB;AAAA,QAGIC,cAAc,EAHlB;AAIA,QAAIC,kBAAkB,KAAtB;;AAEA,QAAMC,iBAAiB,CAAC,EAAEC,OAAO,IAAT,EAAeC,MAAM,QAArB,EAA+BC,OAAO,CAAtC,EAAyCC,MAAM,OAA/C,EAAD,EACnB,EAAEH,OAAO,IAAT,EAAeC,MAAM,UAArB,EAAiCC,OAAO,CAAxC,EAA2CC,MAAM,SAAjD,EADmB,EAEnB,EAAEH,OAAO,IAAT,EAAeC,MAAM,WAArB,EAAkCC,OAAO,CAAzC,EAA4CC,MAAM,SAAlD,EAFmB,EAGnB,EAAEH,OAAO,IAAT,EAAeC,MAAM,WAArB,EAAkCC,OAAO,CAAzC,EAA4CC,MAAM,SAAlD,EAHmB,EAInB,EAAEH,OAAO,IAAT,EAAeC,MAAM,WAArB,EAAkCC,OAAO,CAAzC,EAA4CC,MAAM,SAAlD,EAJmB,EAKnB,EAAEH,OAAO,KAAT,EAAgBC,MAAM,YAAtB,EAAoCC,OAAO,EAA3C,EAA+CC,MAAM,SAArD,EALmB,EAMnB,EAAEH,OAAO,KAAT,EAAgBC,MAAM,YAAtB,EAAoCC,OAAO,EAA3C,EAA+CC,MAAM,SAArD,EANmB,EAOnB,EAAEH,OAAO,KAAT,EAAgBC,MAAM,YAAtB,EAAoCC,OAAO,EAA3C,EAA+CC,MAAM,SAArD,EAPmB,EAQnB,EAAEH,OAAO,IAAT,EAAeC,MAAM,QAArB,EAA+BC,OAAO,CAAtC,EAAyCC,MAAM,OAA/C,EARmB,EASnB,EAAEH,OAAO,IAAT,EAAeC,MAAM,SAArB,EAAgCC,OAAO,CAAvC,EAA0CC,MAAM,OAAhD,EATmB,EAUnB,EAAEH,OAAO,IAAT,EAAeC,MAAM,SAArB,EAAgCC,OAAO,CAAvC,EAA0CC,MAAM,OAAhD,EAVmB,EAWnB,EAAEH,OAAO,IAAT,EAAeC,MAAM,SAArB,EAAgCC,OAAO,CAAvC,EAA0CC,MAAM,OAAhD,EAXmB,EAYnB,EAAEH,OAAO,IAAT,EAAeC,MAAM,OAArB,EAA8BC,OAAO,CAArC,EAAwCC,MAAM,MAA9C,EAZmB,CAAvB;;AAeA,QAAMC,gBAAgB,CAAC,EAAEJ,OAAO,aAAT,EAAwBC,MAAM,SAA9B,EAAD,EAA4C,EAAED,OAAO,MAAT,EAAiBC,MAAM,MAAvB,EAA5C,EACd,EAAED,OAAO,MAAT,EAAiBC,MAAM,MAAvB,EADc,EACmB,EAAED,OAAO,KAAT,EAAgBC,MAAM,KAAtB,EADnB,EACkD,EAAED,OAAO,SAAT,EAAoBC,MAAM,UAA1B,EADlD,EAEd,EAAED,OAAO,QAAT,EAAmBC,MAAM,QAAzB,EAFc,EAEuB,EAAED,OAAO,OAAT,EAAkBC,MAAM,OAAxB,EAFvB,CAAtB;AAAA,QAIII,YAAY,CAACC,cAAcC,GAAd,CAAkB,MAAlB,KAA6B,EAAEP,OAAO,IAAT,EAA9B,EAA+CA,KAJ/D;AAAA,QAKIQ,SAASC,WALb;AAAA,QAK0B;AACtBC,uBAAmBF,SAAS,sDAAT,GAAkEH,SANzF;AAAA,QAOIM,sBAAsB,kBAAkBD,gBAAlB,GAAqC,2EAP/D;AAAA,QAQIE,uBAAuB,4CAR3B;AAAA,QASIC,kBAAkB,8CATtB;AAAA,QAUIC,qBAAqB,uCAVzB;AAAA,QAWIC,uBAAuB,iDAX3B;AAAA,QAYIC,kBAAkB,2CAZtB;;AAcA,QAAMC,eAAe,SAAfA,YAAe,CAACC,KAAD,EAAW;AAC5BA,cAAMC,sBAAN,GAA+B,KAA/B;AACAD,cAAME,sBAAN,CAA6B,IAA7B,EAAmCF,KAAnC;AACAA,cAAMG,uBAAN,CAA8B,IAA9B,EAAoCH,KAApC;AACAA,cAAMI,yBAAN,CAAgC,IAAhC,EAAsCJ,KAAtC;AACAA,cAAMK,oBAAN,CAA2B,IAA3B,EAAiCL,KAAjC;AACH,KAND;;AAQA,QAAMM,kBAAkB,SAAlBA,eAAkB,CAACN,KAAD,EAAQO,SAAR,EAA4C;AAAA,YAAzBC,aAAyB,uEAAT,IAAS;;AAChE,YAAID,aAAa,OAAjB,EAA0B;AACtB;AACA/B,kBAAMwB,MAAMS,QAAZ,EAAsBC,qBAAtB,GAA8C,KAA9C;AACAV,kBAAMW,iBAAN,IAA2BX,MAAMW,iBAAN,EAA3B;AACH,SAJD,MAIO;AACHnC,kBAAMwB,MAAMS,QAAZ,EAAsBF,SAAtB,GAAkCrB,cAAc0B,MAAd,CAAqB,UAACC,KAAD,EAAW;AAC9D,uBAAOA,MAAM/B,KAAN,IAAeyB,SAAtB;AACH,aAFiC,EAE/B,CAF+B,CAAlC;AAGA/B,kBAAMwB,MAAMS,QAAZ,EAAsBC,qBAAtB,GAA8C,KAA9C;AACA,6BAAOI,OAAP,CAAe,MAAMd,MAAMS,QAAZ,GAAuB,QAAtC,EAAgDD,aAAhD,EAA+DD,SAA/D;AACA;;AAEA,kCAAE,MAAMP,MAAMS,QAAd,EAAwBM,OAAxB,CAAgC,oBAAhC,EAAsDR,SAAtD;AACH;AACDR,qBAAaC,KAAb;AACH,KAhBD;;AAkBA,QAAMgB,iBAAiB,SAAjBA,cAAiB,CAACC,mBAAD,EAAyB;AAC5C,YAAIC,aAAa,KAAjB;AACA,YAAMC,gBAAgB,sBAAEF,mBAAF,EAAuBG,UAAvB,EAAtB;AACA,YAAID,aAAJ,EAAmB;AACfA,0BAAcE,MAAd,CAAqBC,OAArB,CAA6B,UAACC,CAAD,EAAO;AAChC,oBAAIA,EAAEC,OAAF,CAAUC,OAAV,KAAsB,SAA1B,EAAqC;AACjCP,iCAAa,IAAb;AACH;AACJ,aAJD;AAKH;AACD,eAAOA,UAAP;AACH,KAXD;;AAaA,QAAMQ,yBAAyB,SAAzBA,sBAAyB,CAACjB,QAAD,EAAWkB,IAAX,EAAoB;AAC/C,YAAI,CAACA,IAAL,EAAW;AACPnD,kBAAMiC,QAAN,EAAgBmB,UAAhB,GAA6B1C,cAAc0B,MAAd,CACzB,UAACL,SAAD,EAAe;AACX,uBAAOA,UAAUzB,KAAV,KAAoB,aAApB,IAAqCyB,UAAUzB,KAAV,KAAoB,MAAhE;AACH,aAHwB,CAA7B;AAIH,SALD,MAKO;AACHN,kBAAMiC,QAAN,EAAgBmB,UAAhB,GAA6B1C,aAA7B;AACAV,kBAAMiC,QAAN,EAAgBmB,UAAhB,CAA2B,CAA3B,EAA8BC,UAA9B,GAA2C,IAA3C;AACH;AAEJ,KAXD;;AAaA,QAAMC,oBAAoB,SAApBA,iBAAoB,CAAC9B,KAAD,EAAQ+B,GAAR,EAAgB;AACtC,YAAMC,kBAAkBD,IAAIE,IAAJ,CAAS,kBAAT,CAAxB;AACA,YAAMC,gBAAgBH,IAAIE,IAAJ,CAAS,gBAAT,CAAtB;AACA,YAAME,mBAAmBJ,IAAIE,IAAJ,CAAS,aAAT,CAAzB;AACA,YAAMG,kBAAkBL,IAAIE,IAAJ,CAAS,aAAT,CAAxB;AACAF,YAAIE,IAAJ,CAAS,mBAAT,EAA8BI,GAA9B,CAAkC,OAAlC,EAA2C1D,YAAY2D,EAAZ,GAAiB,EAAjB,GAAsB,IAAjE;;AAEA;AACA,YAAMC,cAAcR,IAAIE,IAAJ,CAAS,cAAT,CAApB;AAAA,YACIO,WAAW,OAAQ7D,YAAY8D,EAAZ,CAAeC,GAAf,GAAqB/D,YAAY2D,EAAjC,GAAsC,EAAvC,IAA8C,KAAK,EAAnD,CAAP,CADf;;AAIA;AACA,YAAIK,cAAJ,EAAoB;AAChB,gBAAI,sBAAEC,MAAF,EAAUC,KAAV,KAAoBL,WAAW7D,YAAYmE,IAA/C,EAAqD;AACjD,sCAAE,sBAAE,MAAM9C,MAAMS,QAAZ,GAAuB,uBAAzB,EAAkD,CAAlD,CAAF,EAAwD4B,GAAxD,CAA4D,QAA5D,EAAsE,SAAtE;AACA,sCAAE,sBAAE,MAAMrC,MAAMS,QAAZ,GAAuB,uBAAzB,EAAkD,CAAlD,CAAF,EAAwD4B,GAAxD,CAA4D,OAA5D,EAAqE,MAArE;AACA,sCAAE,MAAMrC,MAAMS,QAAZ,GAAuB,iCAAzB;AACAT,sBAAM+C,kBAAN,GAA2B,IAA3B;AACA,sCAAE,MAAM/C,MAAMS,QAAZ,GAAuB,QAAzB,EAAmCW,UAAnC,GAAgD4B,QAAhD,CAAyD,EAAEC,MAAM,EAAR,EAAzD;AACH,aAND,MAMO;AACH,sCAAE,sBAAE,MAAMjD,MAAMS,QAAZ,GAAuB,uBAAzB,EAAkD,CAAlD,CAAF,EAAwD4B,GAAxD,CAA4D,QAA5D,EAAsE,UAAtE;AACA,sCAAE,sBAAE,MAAMrC,MAAMS,QAAZ,GAAuB,uBAAzB,EAAkD,CAAlD,CAAF,EAAwD4B,GAAxD,CAA4D,OAA5D,EAAqE,EAArE;AACArC,sBAAM+C,kBAAN,GAA2B,KAA3B;AACA,sCAAE,MAAM/C,MAAMS,QAAZ,GAAuB,QAAzB,EAAmCW,UAAnC,GAAgD4B,QAAhD,CAAyD,EAAEC,MAAMjD,MAAMkD,cAAd,EAAzD;AACH;AACJ;;AAED,YAAInB,IAAIc,KAAJ,KAAcL,QAAlB,EAA4B;AACxBxC,kBAAMmD,kBAAN,GAA2B,IAA3B;AACAnD,kBAAMoD,eAAN,GAAwBpD,MAAMqD,UAAN,CAAiBtE,IAAzC;AACAoD,6BAAiBE,GAAjB,CAAqB,OAArB,EAA8B1D,YAAY8D,EAAZ,CAAeC,GAAf,GAAqB,EAArB,GAA0B,IAAxD;AACAN,4BAAgBC,GAAhB,CAAoB,OAApB,EAA6B1D,YAAY2D,EAAZ,GAAiB,EAAjB,GAAsB,IAAnD;AACH,SALD,MAKO;AACHtC,kBAAMmD,kBAAN,GAA2B,KAA3B;AACAnD,kBAAMoD,eAAN,GAAwBjE,aAAa,IAAb,GAAoBa,MAAMqD,UAAN,CAAiBvE,KAAjB,CAAuBwE,WAAvB,EAApB,GAA2DtD,MAAMqD,UAAN,CAAiBvE,KAAjB,CAAuByE,IAAvB,EAAnF;AACApB,6BAAiBE,GAAjB,CAAqB,OAArB,EAA8B1D,YAAY8D,EAAZ,CAAee,GAAf,GAAqB,EAArB,GAA0B,IAAxD;AACApB,4BAAgBC,GAAhB,CAAoB,OAApB,EAA6B,MAA7B;AACH;;AAED,YAAIoB,gBAAgB1B,IAAIc,KAAJ,MAAeN,YAAYmB,MAAZ,GAAqBC,IAArB,GAA4BpB,YAAYqB,UAAZ,EAA5B,GAAuD7B,IAAI2B,MAAJ,GAAaC,IAAnF,CAApB;;AAEA,YAAI5B,IAAIc,KAAJ,MAAe,GAAnB,EAAwB;AACpBY,4BAAgBA,gBAAgB,CAAhB,GAAoBA,aAApB,GAAoC,EAApD;AACAvB,0BAAcG,GAAd,CAAkB,OAAlB,EAA2BoB,gBAAgB,IAA3C;AACAzB,4BAAgBK,GAAhB,CAAoB,OAApB,EAA6BoB,gBAAgB,EAAhB,GAAqB,IAAlD;AACH,SAJD,MAIO;AACHzB,4BAAgBK,GAAhB,CAAoB,OAApB,EAA6B,MAA7B;AACAH,0BAAcG,GAAd,CAAkB,OAAlB,EAA2B,MAA3B;AACH;AACJ,KAlDD;;AAoDA,QAAMwB,uBAAuB,SAAvBA,oBAAuB,CAACC,eAAD,EAAqB;AAC9C,YAAMC,UAAUlF,eAAemF,MAAf,CAAsB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACxC,mBAAOD,EAAEnF,KAAF,CAAQyE,IAAR,GAAeY,MAAf,GAAwBD,EAAEpF,KAAF,CAAQyE,IAAR,GAAeY,MAAvC,GAAgDF,CAAhD,GAAoDC,CAA3D;AACH,SAFW,CAAhB;AAAA,YAGIE,UAAUvF,eAAemF,MAAf,CAAsB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACtC,mBAAOD,EAAElF,IAAF,CAAOwE,IAAP,GAAcY,MAAd,GAAuBD,EAAEnF,IAAF,CAAOwE,IAAP,GAAcY,MAArC,GAA8CF,CAA9C,GAAkDC,CAAzD;AACH,SAFS,CAHd;AAAA,YAMIG,SAASnF,cAAc8E,MAAd,CAAqB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACpC,mBAAOD,EAAElF,IAAF,CAAOwE,IAAP,GAAcY,MAAd,GAAuBD,EAAEnF,IAAF,CAAOwE,IAAP,GAAcY,MAArC,GAA8CF,CAA9C,GAAkDC,CAAzD;AACH,SAFQ,CANb;AASA,YAAMI,WAAW,SAAXA,QAAW,CAACC,MAAD,EAAY;AACzB,gBAAMC,OAAO,yBAAb;AAAA,gBACIC,MAAM,sBAAE,UAAUF,OAAOhB,IAAP,EAAV,GAA0B,QAA5B,EACLlB,GADK,CACD,EAAE,YAAY,UAAd,EAA0B,SAAS,MAAnC,EAA2C,eAAe,QAA1D,EAAoE,cAAc,QAAlF,EAA4F,QAAQmC,IAApG,EADC,EAELE,QAFK,CAEI,sBAAE,MAAF,CAFJ,CADV;AAAA,gBAII7B,QAAQ4B,IAAI5B,KAAJ,EAJZ;AAKA4B,gBAAIE,MAAJ;AACA,mBAAO9B,KAAP;AACH,SARD;AASAlE,oBAAY8D,EAAZ,GAAiB,EAAjB;AACA9D,oBAAY8D,EAAZ,CAAee,GAAf,GAAqBc,SAASP,QAAQjF,KAAjB,CAArB;AACAH,oBAAY8D,EAAZ,CAAeC,GAAf,GAAqB4B,SAASF,QAAQrF,IAAjB,CAArB;AACAJ,oBAAY2D,EAAZ,GAAiBgC,SAASD,OAAOtF,IAAhB,CAAjB;AACAJ,oBAAYmE,IAAZ,GAAmBwB,SAASR,eAAT,IAA4B,EAA/C;AACH,KAxBD;;AA0BA,QAAMc,aAAa,SAAbA,UAAa,CAAC7C,GAAD,EAAM8C,MAAN,EAAiB;AAChC9C,cAAM,sBAAEA,GAAF,CAAN;AACA,YAAI+C,MAAM/C,IAAIgD,IAAJ,CAAS,OAAT,CAAV;AACAhD,YAAIiD,WAAJ,CAAgBF,GAAhB;AACA,YAAM7F,OAAO6F,IAAIG,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAb;AACAH,cAAMD,WAAW,IAAX,GAAkB5F,OAAO,SAAzB,GAAqCA,OAAO,OAAlD;AACA8C,YAAIiD,WAAJ,CAAgBF,GAAhB;AACH,KAPD;;AASO,QAAMI,sBAAO,SAAPA,IAAO,CAACC,UAAD,EAAaC,YAAb,EAA2BC,WAA3B,EAAwCC,aAAxC,EAAuDC,gBAAvD,EAAyEC,gBAAzE,EAA2FC,WAA3F,EAAwGC,aAAxG,EAA0H;;AAE1I7B,6BAAqB0B,gBAArB;AACA,YAAI9G,KAAK0G,UAAL,CAAJ,EAAsB1G,KAAK0G,UAAL,EAAiBQ,MAAjB;AACtBnH,cAAM2G,UAAN,IAAoB;AAChB;AACA1E,sBAAU0E,UAFM;AAGhB9B,wBAAYxE,eAAe+B,MAAf,CAAsB,UAAC6D,GAAD,EAAS;AACvC,uBAAOW,gBAAgBX,IAAI3F,KAA3B;AACH,aAFW,EAET,CAFS,CAHI;AAMhBD,4BAAgBA,cANA;AAOhB0B,uBAAWrB,cAAc0B,MAAd,CAAqB,UAACC,KAAD,EAAW;AACvC,uBAAOA,MAAM/B,KAAN,IAAeuG,WAAtB;AACH,aAFU,EAER,CAFQ,CAPK;AAUhB1E,+BAAmB2E,aAVH,EAUkB;AAClCpC,4BAAgBqC,gBAXA;AAYhBK,4BAAgBJ,gBAZA;AAahBK,6BAAiB,CAbD;AAchBC,0BAAc,CAdE;;AAgBhB7F,oCAAwB,KAhBR;AAiBhBS,mCAAuB,KAjBP;AAkBhBqF,6BAAiB,IAlBD;AAmBhBC,6BAAiB,IAnBD;AAoBhBC,qCAAyB,KApBT;AAqBhBC,gCAAoB,KArBJ;AAsBhBC,kCAAsB,KAtBN;AAuBhBC,uBAAW,OAAOX,WAAP,IAAsB,WAAtB,GAAoC,IAApC,GAA2CA,WAvBtC;AAwBhBY,yBAAa,OAAOX,aAAP,IAAwB,WAAxB,GAAsC,IAAtC,GAA6CA,aAxB1C;AAyBhB3C,gCAAoB,KAzBJ;;AA2BhBuD,iCAAqB9G,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CA3BL;AA4BhBoB,oCAAwB/G,oBAAoB8G,MAApB,CAA2Bf,gBAA3B,EAA6CJ,YAA7C,CA5BR;;AA8BhBqB,yBAAa9G,gBAAgB4G,MAAhB,CAAuBG,mBAAmBlH,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAnB,CAAvB,CA9BG;AA+BhBuB,8BAAkBjH,qBAAqB6G,MAArB,CAA4BG,mBAAmBlH,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAnB,CAA5B,EAAyGG,mBAAmB,GAAnB,GAAyBH,YAAzB,GAAwC,GAAjJ,CA/BF;AAgChBwB,4BAAgBhH,mBAAmB2G,MAAnB,CAA0BG,mBAAmBlH,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAnB,CAA1B,CAhCA;AAiChByB,8BAAkBhH,qBAAqB0G,MAArB,CAA4B/G,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAA5B,EAAqFG,mBAAmB,GAAnB,GAAyBH,YAAzB,GAAwC,GAA7H,CAjCF;AAkChB0B,yBAAahH,gBAAgByG,MAAhB,CAAuB/G,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAvB,EAAgFG,mBAAmB,GAAnB,GAAyBH,YAAzB,GAAwC,GAAxH;;AAlCG,SAApB;AAqCA3G,aAAK0G,UAAL,IAAmB,IAAnB;;AAEA3G,cAAM2G,UAAN,EAAkB4B,yBAAlB,GAA8C,UAACC,KAAD,EAAQhH,KAAR,EAAkB;AAC5D,gBAAMiH,OAAO,CAACjH,MAAMC,sBAApB;AACAF,yBAAaC,KAAb;AACAA,kBAAMC,sBAAN,GAA+BgH,IAA/B;AACAD,kBAAME,aAAN,CAAoBlH,KAApB,GAA4BA,MAAMS,QAAlC;AACH,SALD;AAMAjC,cAAM2G,UAAN,EAAkBhF,uBAAlB,GAA4C,UAAC6G,KAAD,EAAQhH,KAAR,EAAkB;AAC1D,gBAAMiH,OAAO,CAACjH,MAAMU,qBAApB;AACA,gBAAMqB,MAAM,sBAAE,MAAM/B,MAAMS,QAAZ,GAAuB,wBAAzB,EAAmD,CAAnD,CAAZ;AACA,gBAAIwG,QAAQ,IAAR,IAAgBD,KAApB,EAA2B;AACvBjH,6BAAaC,KAAb;AACAA,sBAAMU,qBAAN,GAA8BuG,IAA9B;AACArC,2BAAW7C,GAAX,EAAgB,IAAhB;AACAiF,sBAAME,aAAN,CAAoBlH,KAApB,GAA4BA,MAAMS,QAAlC;AACH,aALD,MAKO;AACHT,sBAAMU,qBAAN,GAA8B,KAA9B;AACAkE,2BAAW7C,GAAX,EAAgB,KAAhB;AACH;AAEJ,SAbD;;AAeAvD,cAAM2G,UAAN,EAAkBgC,kBAAlB,GAAuC,UAACH,KAAD,EAAQhH,KAAR,EAAkB;AACrD,gBAAMoH,QAAQpH,MAAMkD,cAAN,GAAuB,IAAvB,GAA8BlD,MAAMqD,UAAN,CAAiBvE,KAA/C,GAAuD,GAArE;AACA,0CAAoBuI,UAApB,CAA+B,MAAMrH,MAAMS,QAAZ,GAAuB,QAAtD,EAAgE2G,KAAhE;AACH,SAHD;;AAKA5I,cAAM2G,UAAN,EAAkBmC,gBAAlB,GAAqC,UAACN,KAAD,EAAQhH,KAAR,EAAkB;AACnD,gBAAMoH,QAAQpH,MAAMkD,cAAN,GAAuB,IAAvB,GAA8BlD,MAAMqD,UAAN,CAAiBvE,KAA/C,GAAuD,GAArE;AACA,wCAAkBuI,UAAlB,CAA6B,MAAMrH,MAAMS,QAAZ,GAAuB,QAApD,EAA8D2G,KAA9D;AACH,SAHD;;AAKA5I,cAAM2G,UAAN,EAAkB7E,eAAlB,GAAoC,UAAC0G,KAAD,EAAQhH,KAAR,EAAkB;AAClD,gBAAMO,YAAY,sBAAEyG,MAAMO,MAAR,EAAgBxC,IAAhB,CAAqB,gBAArB,CAAlB;AACA,gBAAIxE,SAAJ,EAAe;AACXD,gCAAgBN,KAAhB,EAAuBO,SAAvB;AACH;AACJ,SALD;;AAOA/B,cAAM2G,UAAN,EAAkBqC,gBAAlB,GAAqC,UAACR,KAAD,EAAQhH,KAAR,EAAkB;AACnD,gBAAMqD,aAAa2D,MAAMO,MAAN,CAAaE,OAAb,CAAqBC,UAAxC;AACA,gBAAIrE,UAAJ,EAAgB;AACZrD,wBAAQxB,MAAMwB,MAAMS,QAAZ,CAAR;AACAT,sBAAMqD,UAAN,GAAmBxE,eAAe+B,MAAf,CAAsB,UAAC6D,GAAD,EAAS;AAC9C,2BAAOpB,cAAcoB,IAAI3F,KAAzB;AACH,iBAFkB,EAEhB,CAFgB,CAAnB;AAGAgD,kCAAkB9B,KAAlB,EAAyB,sBAAE,MAAMA,MAAMS,QAAd,EAAwBwB,IAAxB,CAA6B,aAA7B,CAAzB;AACA,oBAAM0F,OAAOC,OAAOvE,UAAP,CAAb;AACA,oBAAIsE,SAAS3H,MAAMO,SAAN,CAAgBzB,KAAhB,KAA0B,aAA1B,IAA2CkB,MAAMO,SAAN,CAAgBzB,KAAhB,KAA0B,MAA9E,CAAJ,EAA2F;AACvFwB,oCAAgBN,KAAhB,EAAuB,MAAvB,EAA+BqD,UAA/B;AACH,iBAFD,MAGK;AACF,qCAAOvC,OAAP,CAAe,MAAMd,MAAMS,QAAZ,GAAuB,QAAtC,EAAgD4C,UAAhD,EAA4DrD,MAAMO,SAAN,CAAgBzB,KAA5E;AACF;AACD4C,uCAAuB1B,MAAMS,QAA7B,EAAuC,CAACkH,IAAD,IAAS,CAAC3G,eAAe,MAAMmE,UAAN,GAAmB,QAAlC,CAAjD;AACAnF,sBAAMsG,mBAAN,GAA4B9G,iBAAiB+G,MAAjB,CAAwBvG,MAAM4F,cAA9B,EAA8CvC,UAA9C,CAA5B;AACArD,sBAAMwG,sBAAN,GAA+B/G,oBAAoB8G,MAApB,CAA2BvG,MAAM4F,cAAjC,EAAiDvC,UAAjD,CAA/B;AACArD,sBAAMyG,WAAN,GAAoB9G,gBAAgB4G,MAAhB,CAAuBG,mBAAmBlH,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAnB,CAAvB,CAApB;AACApF,sBAAM2G,gBAAN,GAAyBjH,qBAAqB6G,MAArB,CAA4BG,mBAAmBlH,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAnB,CAA5B,EAAyGG,mBAAmB,GAAnB,GAAyBH,YAAzB,GAAwC,GAAjJ,CAAzB;AACApF,sBAAM4G,cAAN,GAAuBhH,mBAAmB2G,MAAnB,CAA0BG,mBAAmBlH,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAnB,CAA1B,CAAvB;AACApF,sBAAM6G,gBAAN,GAAyBhH,qBAAqB0G,MAArB,CAA4BG,mBAAmBlH,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAnB,CAA5B,EAAyGG,mBAAmB,GAAnB,GAAyBH,YAAzB,GAAwC,GAAjJ,CAAzB;AACApF,sBAAM8G,WAAN,GAAoBhH,gBAAgByG,MAAhB,CAAuBG,mBAAmBlH,iBAAiB+G,MAAjB,CAAwBf,gBAAxB,EAA0CJ,YAA1C,CAAnB,CAAvB,EAAoGG,mBAAmB,GAAnB,GAAyBH,YAAzB,GAAwC,GAA5I,CAApB;AACA,sCAAE,MAAMpF,MAAMS,QAAd,EAAwBM,OAAxB,CAAgC,2BAAhC,EAA6DsC,UAA7D;AACH;AACJ,SAzBD;;AA2BA;AACA3B,+BAAuByD,UAAvB,EAAmC,CAACyC,OAAOxC,YAAP,CAAD,IAAyB,CAACpE,eAAe,MAAMmE,UAAN,GAAmB,QAAlC,CAA7D;;AAEA,YAAI,CAACG,aAAL,EAAoB;AAChB9G,kBAAM2G,UAAN,EAAkBY,eAAlB,GAAoC,KAApC;AACH;;AAEDvH,cAAM2G,UAAN,EAAkB0C,eAAlB,GAAoC,UAACb,KAAD,EAAQhH,KAAR,EAAkB;AAClDA,kBAAMgG,eAAN,GAAwB,CAAChG,MAAMgG,eAA/B;AACA,gCAAU8B,eAAV,CAA0B,MAAM9H,MAAMS,QAAZ,GAAuB,QAAjD;AACH,SAHD;;AAKAjC,cAAM2G,UAAN,EAAkB/E,yBAAlB,GAA8C,UAAC4G,KAAD,EAAQhH,KAAR,EAAkB;AAC5D,gBAAMiH,OAAO,CAACjH,MAAMiG,uBAApB;AACA,gBAAMlE,MAAM,sBAAE,MAAM/B,MAAMS,QAAZ,GAAuB,wBAAzB,EAAmD,CAAnD,CAAZ;AACA,gBAAIwG,QAAQ,IAAR,IAAgBD,KAApB,EAA2B;AACvBjH,6BAAaC,KAAb;AACAA,sBAAMiG,uBAAN,GAAgCgB,IAAhC;AACArC,2BAAW7C,GAAX,EAAgB,IAAhB;AACAiF,sBAAME,aAAN,CAAoBlH,KAApB,GAA4BA,MAAMS,QAAlC;AACH,aALD,MAKO;AACHT,sBAAMiG,uBAAN,GAAgC,KAAhC;AACArB,2BAAW7C,GAAX,EAAgB,KAAhB;AACH;AACJ,SAZD;AAaA;AACAvD,cAAM2G,UAAN,EAAkB4C,cAAlB,GAAmC,UAACf,KAAD,EAAQhH,KAAR,EAAkB;AACjD,gBAAMgI,cAAchB,MAAMO,MAAN,CAAaE,OAAb,CAAqBQ,WAAzC;AACA,gBAAID,WAAJ,EAAiB;AACbE,wBAAQ,CAAC,mCAAmCF,WAApC,CAAR,EAA0D,UAACG,IAAD,EAAU;AAChE,wBAAMC,iBAAiB,MAAMpI,MAAMS,QAAZ,GAAuB,QAA9C;AACA,0CAAE2H,cAAF,EAAkBhH,UAAlB,GAA+BiH,QAA/B,GAA0C,IAA1C;AACAF,yBAAKjD,IAAL,CAAUkD,cAAV;AACH,iBAJD;AAKH;AACJ,SATD;;AAWA5J,cAAM2G,UAAN,EAAkB9E,oBAAlB,GAAyC,UAAC2G,KAAD,EAAQhH,KAAR,EAAkB;AACvD,gBAAMiH,OAAO,CAACjH,MAAMkG,kBAApB;AACA,gBAAMnE,MAAM,sBAAE,MAAM/B,MAAMS,QAAZ,GAAuB,yBAAzB,EAAoD,CAApD,CAAZ;AACA,gBAAIwG,QAAQ,IAAR,IAAgBD,KAApB,EAA2B;AACvBjH,6BAAaC,KAAb;AACAA,sBAAMkG,kBAAN,GAA2Be,IAA3B;AACArC,2BAAW7C,GAAX,EAAgB,IAAhB;AACAiF,sBAAME,aAAN,CAAoBlH,KAApB,GAA4BA,MAAMS,QAAlC;AACH,aALD,MAKO;AACHT,sBAAMkG,kBAAN,GAA2B,KAA3B;AACAtB,2BAAW7C,GAAX,EAAgB,KAAhB;AACH;AACJ,SAZD;;AAcAvD,cAAM2G,UAAN,EAAkBjF,sBAAlB,GAA2C,UAAC8G,KAAD,EAAQhH,KAAR,EAAkB;AACzD,gBAAMiH,OAAO,CAACjH,MAAMmG,oBAApB;AACA,gBAAMpE,MAAM,sBAAE,MAAM/B,MAAMS,QAAZ,GAAuB,4BAAzB,EAAuD,CAAvD,CAAZ;AACA,gBAAIwG,QAAQ,IAAR,IAAgBD,KAApB,EAA2B;AACvBjH,6BAAaC,KAAb;AACAA,sBAAMmG,oBAAN,GAA6Bc,IAA7B;AACArC,2BAAW7C,GAAX,EAAgB,IAAhB;AACAiF,sBAAME,aAAN,CAAoBlH,KAApB,GAA4BA,MAAMS,QAAlC;AACH,aALD,MAKO;AACHT,sBAAMmG,oBAAN,GAA6B,KAA7B;AACAvB,2BAAW7C,GAAX,EAAgB,KAAhB;AACH;AACJ,SAZD;;AAcAvD,cAAM2G,UAAN,EAAkBmD,MAAlB,GAA2B,UAACtB,KAAD,EAAQhH,KAAR,EAAkB;AACzC,gBAAMuI,aAAavB,MAAMO,MAAN,CAAaE,OAAb,CAAqBe,UAAxC;AACA,gBAAID,UAAJ,EAAgB;AACZ,oBAAME,KAAK,MAAMzI,MAAMS,QAAZ,GAAuB,QAAlC;AACA,oBAAMI,QAAQ,sBAAE4H,EAAF,EAAMrH,UAAN,EAAd;AACA,wBAAQmH,UAAR;AACI,yBAAK,KAAL;AACI1H,8BAAM6H,gBAAN;AACA;AACJ,yBAAK,KAAL;AACI7H,8BAAM8H,WAAN,CAAkB;AACd1J,kCAAM;AADQ,yBAAlB;AAGA;AACJ,yBAAK,KAAL;AACI,yCAAO2J,YAAP,CAAoB/H,KAApB,EAA2B,sBAAE4H,EAAF,EAAMI,IAAN,EAA3B;AACA;AACJ,yBAAK,KAAL;AACIhI,8BAAM6H,gBAAN,CAAuB;AACnBzJ,kCAAM;AADa,yBAAvB;AAGA;AAhBR;AAkBH;AACJ,SAxBD;;AA0BA;AACA,8BAAE,MAAMkG,UAAR,EAAoB2D,EAApB,CAAuB,0BAAvB,EAAmD,UAACC,CAAD,EAAIlI,KAAJ,EAAc;AAC7DrC,kBAAM2G,UAAN,EAAkBU,eAAlB,GAAoChF,MAAMmI,cAAN,GAAuB7E,MAA3D;AACH,SAFD;;AAIA3F,cAAM2G,UAAN,EAAkBW,YAAlB,GAAiC,sBAAE,MAAMX,UAAN,GAAmB,QAArB,EAA+B0D,IAA/B,CAAoC,cAApC,CAAjC;;AAEA;AACA,8BAAE,MAAM1D,UAAR,EAAoB2D,EAApB,CAAuB,mBAAvB,EAA4C,UAACC,CAAD,EAAIE,OAAJ,EAAgB;AACxD,gBAAMpI,QAAQ,sBAAE,MAAMsE,UAAN,GAAmB,QAArB,EAA+B/D,UAA/B,EAAd;AACA5C,kBAAM2G,UAAN,EAAkBW,YAAlB,GAAiCjF,MAAMqI,iBAAN,EAAjC;AAEH,SAJD;AAKA,8BAAE,MAAM/D,UAAR,EAAoB2D,EAApB,CAAuB,sBAAvB,EAA+C,UAACC,CAAD,EAAIE,OAAJ,EAAgB;AAC3D,gBAAMpI,QAAQ,sBAAE,MAAMsE,UAAN,GAAmB,QAArB,EAA+B/D,UAA/B,EAAd;AACA5C,kBAAM2G,UAAN,EAAkBW,YAAlB,GAAiCjF,MAAMqI,iBAAN,EAAjC;AACH,SAHD;;AAKA;AACA,YAAIvG,cAAJ,EAAoB;AAChB,kCAAEC,MAAF,EAAUuG,MAAV,CAAiB,YAAM;AACnBrH,kCAAkBtD,MAAM2G,UAAN,CAAlB,EAAqC,sBAAE,MAAMA,UAAR,EAAoBlD,IAApB,CAAyB,aAAzB,CAArC;AACH,aAFD;AAGH,SAJD,MAIO;AACH,kCAAE,MAAMkD,UAAR,EAAoB2D,EAApB,CAAuB,cAAvB,EAAuC,UAASC,CAAT,EAAY;AAC/CjH,kCAAkBtD,MAAM2G,UAAN,CAAlB,EAAqC,sBAAE,IAAF,EAAQlD,IAAR,CAAa,aAAb,CAArC;AACH,aAFD;AAGH;;AAED;AACA,SAACrD,eAAD,IAAoB,sBAAE,MAAF,EAAUkK,EAAV,CAAa,OAAb,EAAsB,UAAC9B,KAAD,EAAW;AACjD,6BAAE1F,OAAF,CAAU8H,OAAOC,IAAP,CAAY7K,KAAZ,CAAV,EAA8B,UAAC8K,GAAD,EAAS;AACnC,oBAAItC,MAAME,aAAN,IAAuBoC,OAAOtC,MAAME,aAAN,CAAoBlH,KAAtD,EACID,aAAavB,MAAM8K,GAAN,CAAb;AACP,aAHD;AAIH,SALmB,CAApB;;AAOA1K,0BAAkB,IAAlB;;AAEA,YAAM2K,QAAQ,8CAAQhG,IAAR,EAAd;;AAEA,8BAAE,MAAM4B,UAAN,GAAmB,SAArB,EAAgCqE,OAAhC,CAAwCD,KAAxC;;AAEA;AACA,8BAAGE,UAAH,CAAc,QAAd,IAA0B,UAACC,GAAD,EAAMzK,IAAN,EAAe;AACrC,mBAAOyK,IAAI9I,MAAJ,CAAW,UAAC+I,IAAD,EAAU;AACxB,uBAAOA,KAAK1K,IAAL,IAAaA,IAApB;AACH,aAFM,CAAP;AAGH,SAJD;;AAMAR,aAAK0G,UAAL,IAAmB,sBAAGyE,IAAH,CAAQL,MAAM,CAAN,CAAR,EAAkB/K,MAAM2G,UAAN,CAAlB,CAAnB;;AAEA,YAAM0E,OAAON,MAAMtH,IAAN,CAAW,8BAAX,CAAb;AACAvD,yBAAiByG,UAAjB,IAA+B,+BAAgBD,IAAhB,CAAqB2E,IAArB,EAA2B1E,UAA3B,CAA/B;;AAEA;AACAoE,cAAMtH,IAAN,CAAW,kBAAX,EAA+B6G,EAA/B,CAAkC,OAAlC,EAA2C,UAACC,CAAD,EAAO;AAAEA,cAAEe,eAAF;AAAqB,SAAzE;AACAP,cAAMtH,IAAN,CAAW,gBAAX,EAA6B6G,EAA7B,CAAgC,OAAhC,EAAyC,UAACC,CAAD,EAAO;AAAEA,cAAEe,eAAF;AAAqB,SAAvE;AACAhI,0BAAkBtD,MAAM2G,UAAN,CAAlB,EAAqC,sBAAE,MAAMA,UAAR,EAAoBlD,IAApB,CAAyB,aAAzB,CAArC;AAEH,KAnQM;;AAqQP;AACO,QAAM8H,wCAAgB,SAAhBA,aAAgB,CAACtJ,QAAD,EAAWF,SAAX,EAAsB8C,UAAtB,EAAkCwC,eAAlC,EAAmDC,YAAnD,EAAoE;AAC7F,YAAMkE,IAAIxL,MAAMiC,QAAN,CAAV;AACA,YAAI,CAACuJ,CAAL,EAAQ;AACRA,UAAEzJ,SAAF,GAAcrB,cAAc0B,MAAd,CAAqB,UAACC,KAAD,EAAW;AAC1C,mBAAOA,MAAM/B,KAAN,IAAeyB,SAAtB;AACH,SAFa,EAEX,CAFW,CAAd;AAGAyJ,UAAE3G,UAAF,GAAexE,eAAe+B,MAAf,CAAsB,UAAC6B,EAAD,EAAQ;AACzC,mBAAOY,cAAcZ,GAAG3D,KAAxB;AACH,SAFc,EAEZ,CAFY,CAAf;AAGAkL,UAAEnE,eAAF,GAAoBA,eAApB;AACAmE,UAAElE,YAAF,GAAiBA,YAAjB;AACA;AACApE,+BAAuBjB,QAAvB,EAAiC,CAACmH,OAAOvE,UAAP,CAAD,IAAuByC,eAAe,CAAvE;AACAhE,0BAAkBkI,CAAlB,EAAqB,sBAAE,MAAMvJ,QAAR,EAAkBwB,IAAlB,CAAuB,aAAvB,CAArB;AACH,KAdM;;AAgBA,QAAMgI,4EAAkC,SAAlCA,+BAAkC,CAACxJ,QAAD,EAAWyJ,MAAX,EAAsB;AACjE,YAAI1L,MAAMiC,QAAN,CAAJ,EAAqB;AACjBiB,mCAAuBjB,QAAvB,EAAiCyJ,MAAjC;AACH;AACJ,KAJM;;AAMP;;;;;AAKO,QAAMC,4CAAkB,SAAlBA,eAAkB,CAAC1J,QAAD,EAAWF,SAAX,EAAsB6J,aAAtB,EAAwC;AACnE,YAAIA,aAAJ,EAAmB;AACf5L,kBAAMiC,QAAN,EAAgBH,eAAhB,CAAgC9B,MAAMiC,QAAN,CAAhC,EAAiDF,SAAjD;AACH,SAFD,MAEO;AACH/B,kBAAMiC,QAAN,EAAgBF,SAAhB,GAA4BrB,cAAc0B,MAAd,CAAqB,UAACC,KAAD,EAAW;AACxD,uBAAOA,MAAM/B,KAAN,IAAeyB,SAAtB;AACH,aAF2B,EAEzB,CAFyB,CAA5B;AAGH;AACJ,KARM;;AAUA,QAAM8J,sCAAe,SAAfA,YAAe,CAAC5J,QAAD,EAAc;AACtC,YAAIhC,KAAKgC,QAAL,CAAJ,EAAoB;AAChBhC,iBAAKgC,QAAL,EAAekF,MAAf;AACAjH,6BAAiB+B,QAAjB,KAA8B/B,iBAAiB+B,QAAjB,EAA2BkF,MAA3B,EAA9B;AACA,mBAAOjH,iBAAiB+B,QAAjB,CAAP;AACA,mBAAOhC,KAAKgC,QAAL,CAAP;AACA,mBAAOjC,MAAMiC,QAAN,CAAP;AACH;AACJ,KARM;;AAUA,QAAM6J,kDAAqB,SAArBA,kBAAqB,CAACC,KAAD,EAAQ9J,QAAR,EAAqB;AACnDjC,cAAMiC,QAAN,EAAgBoF,eAAhB,GAAkC0E,KAAlC;AACH,KAFM;;AAIA,QAAMC,kEAA6B,SAA7BA,0BAA6B,GAAM;AAC5C,eAAO,iBAAEnB,IAAF,CAAO7K,KAAP,EAAciM,GAAd,CAAkB,UAAChC,EAAD,EAAQ;AAC7B,mBAAO,EAAEA,IAAIA,EAAN,EAAUlI,WAAW/B,MAAMiK,EAAN,EAAUlI,SAAV,CAAoBzB,KAAzC,EAAP;AACH,SAFM,CAAP;AAGH,KAJM;;sBAMQ;AACXoG,kBADW;AAEX6E,oCAFW;AAGXE,wEAHW;AAIXE,wCAJW;AAKXE,kCALW;AAMXC,8CANW;AAOXE;AAPW,K","file":"chartOptions.js","sourcesContent":["/**\n * Created by arnab on 2/16/15.\n */\n\nimport $ from 'jquery';\nimport rv from 'common/rivetsExtra';\nimport _ from 'lodash';\nimport chartWindow from 'charts/chartWindow';\nimport charts from 'charts/charts';\nimport moment from 'moment';\nimport chartingRequestMap from 'charts/chartingRequestMap';\nimport html from 'text!charts/chartOptions.html';\nimport indicatorManagement from 'charts/indicators/indicatorManagement';\nimport overlayManagement from 'charts/overlay/overlayManagement';\nimport crosshair from 'charts/crosshair';\nimport 'css!charts/chartOptions.css';\nimport 'common/util';\nimport templateManager from 'charts/chartTemplateManager';\n\nconst state = [],\n    view = [],\n    template_manager = {},\n    stringWidth = {};\nlet isListenerAdded = false;\n\nconst timeperiod_arr = [{ value: \"1t\", name: \"1 Tick\", digit: 1, type: \"ticks\" },\n    { value: \"1m\", name: \"1 Minute\", digit: 1, type: \"minutes\" },\n    { value: \"2m\", name: \"2 Minutes\", digit: 2, type: \"minutes\" },\n    { value: \"3m\", name: \"3 Minutes\", digit: 3, type: \"minutes\" },\n    { value: \"5m\", name: \"5 Minutes\", digit: 5, type: \"minutes\" },\n    { value: \"10m\", name: \"10 Minutes\", digit: 10, type: \"minutes\" },\n    { value: \"15m\", name: \"15 Minutes\", digit: 15, type: \"minutes\" },\n    { value: \"30m\", name: \"30 Minutes\", digit: 30, type: \"minutes\" },\n    { value: \"1h\", name: \"1 Hour\", digit: 1, type: \"hours\" },\n    { value: \"2h\", name: \"2 Hours\", digit: 2, type: \"hours\" },\n    { value: \"4h\", name: \"4 Hours\", digit: 4, type: \"hours\" },\n    { value: \"8h\", name: \"8 Hours\", digit: 8, type: \"hours\" },\n    { value: \"1d\", name: \"1 Day\", digit: 1, type: \"days\" }\n];\n\nconst chartType_arr = [{ value: 'candlestick', name: 'Candles' }, { value: 'ohlc', name: 'OHLC' },\n        { value: 'line', name: 'Line' }, { value: 'dot', name: 'Dot' }, { value: 'linedot', name: 'Line Dot' },\n        { value: 'spline', name: 'Spline' }, { value: 'table', name: 'Table' }\n    ],\n    i18n_name = (local_storage.get('i18n') || { value: 'en' }).value,\n    appURL = getAppURL(), // Get current apps url.\n    urlShareTemplate = appURL + '?affiliates=true&instrument={0}&timePeriod={1}&lang=' + i18n_name,\n    iframeShareTemplate = '<iframe src=\"' + urlShareTemplate + '\" width=\"350\" height=\"400\" style=\"overflow-y : hidden;\" scrolling=\"no\" />',\n    twitterShareTemplate = 'https://twitter.com/share?url={0}&text={1}',\n    fbShareTemplate = 'https://facebook.com/sharer/sharer.php?u={0}',\n    gPlusShareTemplate = 'https://plus.google.com/share?url={0}',\n    bloggerShareTemplate = 'https://www.blogger.com/blog-this.g?u={0}&n={1}',\n    vkShareTemplate = 'http://vk.com/share.php?url={0}&title={1}';\n\nconst hideOverlays = (scope) => {\n    scope.showTimePeriodSelector = false;\n    scope.toggleLoadSaveSelector(null, scope);\n    scope.toggleChartTypeSelector(null, scope);\n    scope.toggleDrawingToolSelector(null, scope);\n    scope.toggleExportSelector(null, scope);\n}\n\nconst changeChartType = (scope, chartType, newTimePeriod = null) => {\n    if (chartType == 'table') {\n        //Do not change chart type\n        state[scope.newTabId].showChartTypeSelector = false;\n        scope.tableViewCallback && scope.tableViewCallback();\n    } else {\n        state[scope.newTabId].chartType = chartType_arr.filter((chart) => {\n            return chart.value == chartType\n        })[0];\n        state[scope.newTabId].showChartTypeSelector = false;\n        charts.refresh('#' + scope.newTabId + '_chart', newTimePeriod, chartType);\n        /* trigger an event on the chart dialog, so we can listen on type changes,\n         * note: this will be use to update chart state for tracker.js */\n        $('#' + scope.newTabId).trigger('chart-type-changed', chartType);\n    }\n    hideOverlays(scope);\n}\n\nconst isOverlaidView = (containerIDWithHash) => {\n    let isOverlaid = false;\n    const existingChart = $(containerIDWithHash).highcharts();\n    if (existingChart) {\n        existingChart.series.forEach((f) => {\n            if (f.options.compare === 'percent') {\n                isOverlaid = true;\n            }\n        });\n    }\n    return isOverlaid;\n}\n\nconst showCandlestickAndOHLC = (newTabId, show) => {\n    if (!show) {\n        state[newTabId].chartTypes = chartType_arr.filter(\n            (chartType) => {\n                return chartType.value !== \"candlestick\" && chartType.value !== \"ohlc\";\n            });\n    } else {\n        state[newTabId].chartTypes = chartType_arr;\n        state[newTabId].chartTypes[1].showBorder = true;\n    }\n\n}\n\nconst responsiveButtons = (scope, ele) => {\n    const loadSaveOverlay = ele.find(\".loadSaveOverlay\");\n    const exportOverlay = ele.find(\".exportOverlay\");\n    const timePeriodButton = ele.find(\".timeperiod\");\n    const chartTypeButton = ele.find(\".chart_type\");\n    ele.find(\".chartTypeOverlay\").css(\"width\", stringWidth.ct + 53 + \"px\");\n\n    // This is needed for calculating relative position.\n    const shareButton = ele.find('.shareButton'),\n        minWidth = 420 + ((stringWidth.tp.max + stringWidth.ct + 65) - (97 + 87));\n\n\n    //Place instrument name for affiliates based on frame width\n    if (isAffiliates()) {\n        if ($(window).width() > minWidth + stringWidth.inst) {\n            $($(\"#\" + scope.newTabId + \" .chartOptions .table\")[0]).css(\"margin\", \"5px 0px\");\n            $($(\"#\" + scope.newTabId + \" .chartOptions .table\")[0]).css(\"float\", \"left\");\n            $(\"#\" + scope.newTabId + \" .chartOptions .instrument_name\");\n            scope.showInstrumentName = true;\n            $(\"#\" + scope.newTabId + \"_chart\").highcharts().setTitle({ text: \"\" });\n        } else {\n            $($(\"#\" + scope.newTabId + \" .chartOptions .table\")[0]).css(\"margin\", \"5px auto\");\n            $($(\"#\" + scope.newTabId + \" .chartOptions .table\")[0]).css(\"float\", \"\");\n            scope.showInstrumentName = false;\n            $(\"#\" + scope.newTabId + \"_chart\").highcharts().setTitle({ text: scope.instrumentName });\n        }\n    }\n\n    if (ele.width() > minWidth) {\n        scope.showChartTypeLabel = true;\n        scope.timePeriod_name = scope.timePeriod.name;\n        timePeriodButton.css(\"width\", stringWidth.tp.max + 25 + \"px\");\n        chartTypeButton.css(\"width\", stringWidth.ct + 55 + \"px\");\n    } else {\n        scope.showChartTypeLabel = false;\n        scope.timePeriod_name = i18n_name == \"en\" ? scope.timePeriod.value.toUpperCase() : scope.timePeriod.value.i18n();\n        timePeriodButton.css(\"width\", stringWidth.tp.min + 27 + \"px\");\n        chartTypeButton.css(\"width\", \"45px\");\n    }\n\n    let positionRight = ele.width() - (shareButton.offset().left + shareButton.outerWidth() - ele.offset().left);\n\n    if (ele.width() <= 730) {\n        positionRight = positionRight > 0 ? positionRight : 25;\n        exportOverlay.css(\"right\", positionRight + \"px\");\n        loadSaveOverlay.css(\"right\", positionRight + 35 + \"px\");\n    } else {\n        loadSaveOverlay.css(\"right\", \"auto\");\n        exportOverlay.css(\"right\", \"auto\");\n    }\n}\n\nconst calculateStringWidth = (instrument_name) => {\n    const longTp1 = timeperiod_arr.reduce((a, b) => {\n            return a.value.i18n().length > b.value.i18n().length ? a : b\n        }),\n        longTp2 = timeperiod_arr.reduce((a, b) => {\n            return a.name.i18n().length > b.name.i18n().length ? a : b\n        }),\n        longCt = chartType_arr.reduce((a, b) => {\n            return a.name.i18n().length > b.name.i18n().length ? a : b\n        });\n    const getWidth = (string) => {\n        const font = '0.8em roboto,sans-serif',\n            obj = $('<div>' + string.i18n() + '</div>')\n            .css({ 'position': 'absolute', 'float': 'left', 'white-space': 'nowrap', 'visibility': 'hidden', 'font': font })\n            .appendTo($('body')),\n            width = obj.width();\n        obj.remove();\n        return width;\n    }\n    stringWidth.tp = {};\n    stringWidth.tp.min = getWidth(longTp1.value);\n    stringWidth.tp.max = getWidth(longTp2.name);\n    stringWidth.ct = getWidth(longCt.name);\n    stringWidth.inst = getWidth(instrument_name) + 20;\n}\n\nconst toggleIcon = (ele, active) => {\n    ele = $(ele);\n    let cls = ele.attr(\"class\");\n    ele.toggleClass(cls);\n    const type = cls.split(\"-\")[0];\n    cls = active === true ? type + \"-w-icon\" : type + \"-icon\";\n    ele.toggleClass(cls);\n}\n\nexport const init = (m_newTabId, m_timePeriod, m_chartType, m_tableViewCb, m_instrumentName, m_instrumentCode, m_showShare, m_showOverlay) => {\n\n    calculateStringWidth(m_instrumentName);\n    if (view[m_newTabId]) view[m_newTabId].unbind();\n    state[m_newTabId] = {\n        //Input parameters\n        newTabId: m_newTabId,\n        timePeriod: timeperiod_arr.filter((obj) => {\n            return m_timePeriod == obj.value\n        })[0],\n        timeperiod_arr: timeperiod_arr,\n        chartType: chartType_arr.filter((chart) => {\n            return chart.value == m_chartType\n        })[0],\n        tableViewCallback: m_tableViewCb, //Callback for table view\n        instrumentName: m_instrumentName,\n        instrumentCode: m_instrumentCode,\n        indicatorsCount: 0,\n        overlayCount: 0,\n\n        showTimePeriodSelector: false,\n        showChartTypeSelector: false,\n        showTableOption: true,\n        enableCrosshair: true,\n        showDrawingToolSelector: false,\n        showExportSelector: false,\n        showLoadSaveSelector: false,\n        showShare: typeof m_showShare == 'undefined' ? true : m_showShare,\n        showOverlay: typeof m_showOverlay == 'undefined' ? true : m_showOverlay,\n        showInstrumentName: false,\n\n        exportChartURLShare: urlShareTemplate.format(m_instrumentCode, m_timePeriod),\n        exportChartIframeShare: iframeShareTemplate.format(m_instrumentCode, m_timePeriod),\n\n        fbShareLink: fbShareTemplate.format(encodeURIComponent(urlShareTemplate.format(m_instrumentCode, m_timePeriod))),\n        twitterShareLink: twitterShareTemplate.format(encodeURIComponent(urlShareTemplate.format(m_instrumentCode, m_timePeriod)), m_instrumentName + '(' + m_timePeriod + ')'),\n        gPlusShareLink: gPlusShareTemplate.format(encodeURIComponent(urlShareTemplate.format(m_instrumentCode, m_timePeriod))),\n        bloggerShareLink: bloggerShareTemplate.format(urlShareTemplate.format(m_instrumentCode, m_timePeriod), m_instrumentName + '(' + m_timePeriod + ')'),\n        vkShareLink: vkShareTemplate.format(urlShareTemplate.format(m_instrumentCode, m_timePeriod), m_instrumentName + '(' + m_timePeriod + ')')\n\n    };\n    view[m_newTabId] = null;\n\n    state[m_newTabId].toggleTimerPeriodSelector = (event, scope) => {\n        const temp = !scope.showTimePeriodSelector;\n        hideOverlays(scope);\n        scope.showTimePeriodSelector = temp;\n        event.originalEvent.scope = scope.newTabId;\n    };\n    state[m_newTabId].toggleChartTypeSelector = (event, scope) => {\n        const temp = !scope.showChartTypeSelector;\n        const ele = $(\"#\" + scope.newTabId + \" .chart_type .img span\")[0];\n        if (temp == true && event) {\n            hideOverlays(scope);\n            scope.showChartTypeSelector = temp;\n            toggleIcon(ele, true);\n            event.originalEvent.scope = scope.newTabId;\n        } else {\n            scope.showChartTypeSelector = false;\n            toggleIcon(ele, false);\n        }\n\n    };\n\n    state[m_newTabId].addRemoveIndicator = (event, scope) => {\n        const title = scope.instrumentName + ' (' + scope.timePeriod.value + ')';\n        indicatorManagement.openDialog('#' + scope.newTabId + '_chart', title);\n    };\n\n    state[m_newTabId].addRemoveOverlay = (event, scope) => {\n        const title = scope.instrumentName + ' (' + scope.timePeriod.value + ')';\n        overlayManagement.openDialog('#' + scope.newTabId + '_chart', title);\n    };\n\n    state[m_newTabId].changeChartType = (event, scope) => {\n        const chartType = $(event.target).attr(\"data-charttype\");\n        if (chartType) {\n            changeChartType(scope, chartType);\n        }\n    };\n\n    state[m_newTabId].changeTimePeriod = (event, scope) => {\n        const timePeriod = event.target.dataset.timeperiod;\n        if (timePeriod) {\n            scope = state[scope.newTabId];\n            scope.timePeriod = timeperiod_arr.filter((obj) => {\n                return timePeriod == obj.value\n            })[0];\n            responsiveButtons(scope, $(\"#\" + scope.newTabId).find(\".chart-view\"));\n            const tick = isTick(timePeriod);\n            if (tick && (scope.chartType.value === 'candlestick' || scope.chartType.value === 'ohlc')) {\n                changeChartType(scope, 'line', timePeriod);\n            }\n            else {\n               charts.refresh('#' + scope.newTabId + '_chart', timePeriod, scope.chartType.value);\n            }\n            showCandlestickAndOHLC(scope.newTabId, !tick && !isOverlaidView('#' + m_newTabId + '_chart'));\n            scope.exportChartURLShare = urlShareTemplate.format(scope.instrumentCode, timePeriod);\n            scope.exportChartIframeShare = iframeShareTemplate.format(scope.instrumentCode, timePeriod);\n            scope.fbShareLink = fbShareTemplate.format(encodeURIComponent(urlShareTemplate.format(m_instrumentCode, m_timePeriod)));\n            scope.twitterShareLink = twitterShareTemplate.format(encodeURIComponent(urlShareTemplate.format(m_instrumentCode, m_timePeriod)), m_instrumentName + '(' + m_timePeriod + ')');\n            scope.gPlusShareLink = gPlusShareTemplate.format(encodeURIComponent(urlShareTemplate.format(m_instrumentCode, m_timePeriod)));\n            scope.bloggerShareLink = bloggerShareTemplate.format(encodeURIComponent(urlShareTemplate.format(m_instrumentCode, m_timePeriod)), m_instrumentName + '(' + m_timePeriod + ')');\n            scope.vkShareLink = vkShareTemplate.format(encodeURIComponent(urlShareTemplate.format(m_instrumentCode, m_timePeriod)), m_instrumentName + '(' + m_timePeriod + ')');\n            $('#' + scope.newTabId).trigger('chart-time-period-changed', timePeriod);\n        }\n    };\n\n    //Disable candlestick and OHLC if it is a tick chart or overlaid view\n    showCandlestickAndOHLC(m_newTabId, !isTick(m_timePeriod) && !isOverlaidView('#' + m_newTabId + '_chart'));\n\n    if (!m_tableViewCb) {\n        state[m_newTabId].showTableOption = false;\n    }\n\n    state[m_newTabId].toggleCrosshair = (event, scope) => {\n        scope.enableCrosshair = !scope.enableCrosshair;\n        crosshair.toggleCrossHair('#' + scope.newTabId + '_chart');\n    };\n\n    state[m_newTabId].toggleDrawingToolSelector = (event, scope) => {\n        const temp = !scope.showDrawingToolSelector;\n        const ele = $(\"#\" + scope.newTabId + ' .drawButton .img span')[0];\n        if (temp == true && event) {\n            hideOverlays(scope);\n            scope.showDrawingToolSelector = temp;\n            toggleIcon(ele, true);\n            event.originalEvent.scope = scope.newTabId;\n        } else {\n            scope.showDrawingToolSelector = false;\n            toggleIcon(ele, false);\n        }\n    };\n    /* Convert this to support es-6 import */\n    state[m_newTabId].addDrawingTool = (event, scope) => {\n        const drawingTool = event.target.dataset.drawingtool;\n        if (drawingTool) {\n            require([\"charts/draw/highcharts_custom/\" + drawingTool], (draw) => {\n                const refererChartID = '#' + scope.newTabId + '_chart';\n                $(refererChartID).highcharts().annotate = true;\n                draw.init(refererChartID);\n            });\n        }\n    };\n\n    state[m_newTabId].toggleExportSelector = (event, scope) => {\n        const temp = !scope.showExportSelector;\n        const ele = $(\"#\" + scope.newTabId + ' .shareButton .img span')[0];\n        if (temp == true && event) {\n            hideOverlays(scope);\n            scope.showExportSelector = temp;\n            toggleIcon(ele, true);\n            event.originalEvent.scope = scope.newTabId;\n        } else {\n            scope.showExportSelector = false;\n            toggleIcon(ele, false);\n        }\n    };\n\n    state[m_newTabId].toggleLoadSaveSelector = (event, scope) => {\n        const temp = !scope.showLoadSaveSelector;\n        const ele = $(\"#\" + scope.newTabId + ' .templateButton .img span')[0];\n        if (temp == true && event) {\n            hideOverlays(scope);\n            scope.showLoadSaveSelector = temp;\n            toggleIcon(ele, true);\n            event.originalEvent.scope = scope.newTabId;\n        } else {\n            scope.showLoadSaveSelector = false;\n            toggleIcon(ele, false);\n        }\n    };\n\n    state[m_newTabId].export = (event, scope) => {\n        const exportType = event.target.dataset.exporttype;\n        if (exportType) {\n            const id = '#' + scope.newTabId + '_chart';\n            const chart = $(id).highcharts();\n            switch (exportType) {\n                case 'png':\n                    chart.exportChartLocal();\n                    break;\n                case 'pdf':\n                    chart.exportChart({\n                        type: 'application/pdf'\n                    });\n                    break;\n                case 'csv':\n                    charts.generate_csv(chart, $(id).data());\n                    break;\n                case 'svg':\n                    chart.exportChartLocal({\n                        type: 'image/svg+xml'\n                    });\n                    break;\n            }\n        }\n    };\n\n    // Listen for indicator changes.\n    $(\"#\" + m_newTabId).on('chart-indicators-changed', (e, chart) => {\n        state[m_newTabId].indicatorsCount = chart.get_indicators().length;\n    });\n\n    state[m_newTabId].overlayCount = $(\"#\" + m_newTabId + \"_chart\").data('overlayCount');\n\n    // Listen for overlay changes.\n    $(\"#\" + m_newTabId).on('chart-overlay-add', (e, overlay) => {\n        const chart = $(\"#\" + m_newTabId + \"_chart\").highcharts();\n        state[m_newTabId].overlayCount = chart.get_overlay_count();\n\n    });\n    $(\"#\" + m_newTabId).on('chart-overlay-remove', (e, overlay) => {\n        const chart = $(\"#\" + m_newTabId + \"_chart\").highcharts();\n        state[m_newTabId].overlayCount = chart.get_overlay_count();\n    });\n\n    // Listen for resize event\n    if (isAffiliates()) {\n        $(window).resize(() => {\n            responsiveButtons(state[m_newTabId], $(\"#\" + m_newTabId).find(\".chart-view\"));\n        });\n    } else {\n        $(\"#\" + m_newTabId).on('resize-event', function(e) {\n            responsiveButtons(state[m_newTabId], $(this).find(\".chart-view\"));\n        });\n    }\n\n    // Add event only once.\n    !isListenerAdded && $('body').on('click', (event) => {\n        _.forEach(Object.keys(state), (tab) => {\n            if (event.originalEvent && tab != event.originalEvent.scope)\n                hideOverlays(state[tab]);\n        });\n    });\n\n    isListenerAdded = true;\n\n    const $html = $(html).i18n();\n\n    $(\"#\" + m_newTabId + \"_header\").prepend($html);\n\n    // Used to filter timeperiod array.\n    rv.formatters['filter'] = (arr, type) => {\n        return arr.filter((item) => {\n            return item.type == type\n        });\n    }\n\n    view[m_newTabId] = rv.bind($html[0], state[m_newTabId]);\n\n    const root = $html.find('.chart-template-manager-root');\n    template_manager[m_newTabId] = templateManager.init(root, m_newTabId);\n\n    // Stop event propagation for these overlays.\n    $html.find(\".loadSaveOverlay\").on(\"click\", (e) => { e.stopPropagation() });\n    $html.find(\".exportOverlay\").on(\"click\", (e) => { e.stopPropagation() });\n    responsiveButtons(state[m_newTabId], $(\"#\" + m_newTabId).find(\".chart-view\"));\n\n}\n\n/* allow settings to be updated when a new chart template is applied */\nexport const updateOptions = (newTabId, chartType, timePeriod, indicatorsCount, overlayCount) => {\n    const s = state[newTabId];\n    if (!s) return;\n    s.chartType = chartType_arr.filter((chart) => {\n        return chart.value == chartType\n    })[0];\n    s.timePeriod = timeperiod_arr.filter((tp) => {\n        return timePeriod == tp.value\n    })[0];\n    s.indicatorsCount = indicatorsCount;\n    s.overlayCount = overlayCount;\n    //Disable candlestick and OHLC if it is a tick chart or overlaid view\n    showCandlestickAndOHLC(newTabId, !isTick(timePeriod) && overlayCount > 0);\n    responsiveButtons(s, $(\"#\" + newTabId).find(\".chart-view\"));\n}\n\nexport const disableEnableCandlestickAndOHLC = (newTabId, enable) => {\n    if (state[newTabId]) {\n        showCandlestickAndOHLC(newTabId, enable);\n    }\n}\n\n/**\n * Supported chartTypes are - candlestick, dot, line, dotline, ohlc, spline, table\n * @param newTabId\n * @param chartType\n */\nexport const selectChartType = (newTabId, chartType, generateEvent) => {\n    if (generateEvent) {\n        state[newTabId].changeChartType(state[newTabId], chartType);\n    } else {\n        state[newTabId].chartType = chartType_arr.filter((chart) => {\n            return chart.value == chartType\n        })[0];\n    }\n}\n\nexport const cleanBinding = (newTabId) => {\n    if (view[newTabId]) {\n        view[newTabId].unbind();\n        template_manager[newTabId] && template_manager[newTabId].unbind();\n        delete template_manager[newTabId];\n        delete view[newTabId];\n        delete state[newTabId];\n    }\n}\n\nexport const setIndicatorsCount = (count, newTabId) => {\n    state[newTabId].indicatorsCount = count;\n}\n\nexport const getAllChartsWithTheirTypes = () => {\n    return _.keys(state).map((id) => {\n        return { id: id, chartType: state[id].chartType.value };\n    });\n}\n\nexport default {\n    init,\n    updateOptions,\n    disableEnableCandlestickAndOHLC,\n    selectChartType,\n    cleanBinding,\n    setIndicatorsCount,\n    getAllChartsWithTheirTypes\n}\n"]}