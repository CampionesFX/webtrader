{"version":3,"sources":["../../../../src/common/highchartsMousewheel.es6"],"names":["mousewheel","containerIdWitHash","noOfCandles","scrollTimer","chart","highcharts","timePeriodInMillis","convertToTimeperiodObject","data","timeInMillis","xAxis","unbind","bind","e","preventDefault","originalEvent","wheelDelta","detail","clearTimeout","setTimeout","setNewExtremes","console","log","extremes","getExtremes","newMin","min","Math","abs","dataMin","setExtremes","max","dataMax"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;AAUO,OAAMA,kCAAa,SAAbA,UAAa,CAACC,kBAAD,EAAwB;AAC/C,UAAIC,cAAc,CAAlB;AAAA,UACIC,cAAc,IADlB;AAEA,UAAMC,QAAQ,sBAAEH,kBAAF,EAAsBI,UAAtB,EAAd;AACA,UAAMC,qBAAqBC,0BAA0B,sBAAEN,kBAAF,EAAsBO,IAAtB,CAA2B,YAA3B,CAA1B,EAAoEC,YAApE,MAAsF,IAAjH;AACA,UAAMC,QAAQN,MAAMM,KAAN,CAAY,CAAZ,CAAd;;AAEA,4BAAET,kBAAF,EAAsBU,MAAtB,CAA6B,2BAA7B,EAA0DC,IAA1D,CAA+D,2BAA/D,EAA4F,UAASC,CAAT,EAAY;AACrGA,WAAEC,cAAF;AACA;AACA;AACA;AACAZ,wBAAe,IAAIW,EAAEE,aAAF,CAAgBC,UAApB,GAAgC,GAAhC,GAAsCH,EAAEE,aAAF,CAAgBE,MAAtD,GAA+D,CAA9E;AACA,aAAGd,WAAH,EACEe,aAAaf,WAAb,EAPmG,CAOxE;AAC7BA,uBAAcgB,WAAWC,cAAX,EAA0B,EAA1B,CAAd;AACF,OATD;;AAWA,eAASA,cAAT,GAA0B;AACrBC,iBAAQC,GAAR,CAAY,QAAZ;AACF,aAAMC,WAAWb,MAAMc,WAAN,EAAjB;AACA;AACA,aAAGtB,cAAc,CAAjB,EAAoB;AACjB,gBAAMuB,SAAUF,SAASG,GAAT,GAAepB,qBAAqBqB,KAAKC,GAAL,CAAS1B,WAAT,CAApD;AACA,gBAAIuB,SAASF,SAASM,OAAtB,EAA+B;AAC5BnB,qBAAMoB,WAAN,CAAkBL,MAAlB,EAA0BF,SAASQ,GAAnC;AACF,aAFD,MAEO;AACHrB,qBAAMoB,WAAN,CAAkBP,SAASM,OAA3B,EAAoCN,SAASQ,GAA7C;AACH;AACH,UAPD,MAQK;AACF,gBAAMN,UAAUF,SAASG,GAAT,GAAepB,qBAAqBqB,KAAKC,GAAL,CAAS1B,WAAT,CAApD;AACA,gBAAIuB,UAASF,SAASS,OAAtB,EAA+B;AAC5BtB,qBAAMoB,WAAN,CAAkBL,OAAlB,EAA0BF,SAASQ,GAAnC;AACF,aAFD,MAEO;AACJrB,qBAAMoB,WAAN,CAAkBP,SAASS,OAA3B,EAAoCT,SAASQ,GAA7C;AACF;AACH;AACD7B,uBAAc,CAAd;AACF;AACH,IAxCM;;qBA0CQ;AACZF;AADY,I","file":"highchartsMousewheel.js","sourcesContent":["/**\n * Created by arnab on 6/30/16.\n */\nimport $ from 'jquery';\nimport _ from 'lodash';\nimport 'highstock';\nimport './util';\n\n\n\nexport const mousewheel = (containerIdWitHash) => {\n   let noOfCandles = 0,\n       scrollTimer = null;\n   const chart = $(containerIdWitHash).highcharts();\n   const timePeriodInMillis = convertToTimeperiodObject($(containerIdWitHash).data('timePeriod')).timeInMillis() || 1000;\n   const xAxis = chart.xAxis[0];\n\n   $(containerIdWitHash).unbind('DOMMouseScroll mousewheel').bind('DOMMouseScroll mousewheel', function(e) {\n      e.preventDefault();\n      //console.log(e.originalEvent.wheelDelta);\n      //Each turn is around 120. We will show one candle per 120\n      //e.originalEvent.detail is for firefox.\n      noOfCandles += 4 * e.originalEvent.wheelDelta /120 | e.originalEvent.detail | 0;\n      if(scrollTimer)\n        clearTimeout(scrollTimer); //Clearing previously pending timers;\n      scrollTimer = setTimeout(setNewExtremes,50);\n   });\n\n   function setNewExtremes() {\n        console.log(\"called\");\n      const extremes = xAxis.getExtremes();\n      //If its positive, then move up\n      if(noOfCandles > 0) {\n         const newMin = (extremes.min - timePeriodInMillis * Math.abs(noOfCandles));\n         if (newMin > extremes.dataMin) {\n            xAxis.setExtremes(newMin, extremes.max);\n         } else {\n             xAxis.setExtremes(extremes.dataMin, extremes.max);\n         }\n      }\n      else {\n         const newMin = (extremes.min + timePeriodInMillis * Math.abs(noOfCandles));\n         if (newMin < extremes.dataMax) {\n            xAxis.setExtremes(newMin, extremes.max);\n         } else {\n            xAxis.setExtremes(extremes.dataMax, extremes.max);             \n         }\n      }\n      noOfCandles = 0;\n   }\n}\n\nexport default {\n   mousewheel\n};\n\n"]}