{"version":3,"sources":["../../../../src/financialassessment/financialassessment.es6"],"names":["win","win_view","init","createBlankWindow","i18n","title","width","height","resizable","collapsable","minimizable","maximizable","closable","closeOnEscape","modal","ignoreTileAction","close","unbind","dialog","state","financial","experience_array","frequency_array","forex_trading_experience","forex_trading_frequency","indices_trading_experience","indices_trading_frequency","commodities_trading_experience","commodities_trading_frequency","stocks_trading_experience","stocks_trading_frequency","other_derivatives_trading_experience","other_derivatives_trading_frequency","other_instruments_trading_experience","other_instruments_trading_frequency","employment_industry_array","employment_industry","education_level_array","education_level","income_source_array","income_source","net_income_array","net_income","estimated_worth_array","estimated_worth","occupation_array","occupation","disabled","empty_field","validate","submit","request","set_financial_assessment","send","then","data","window","location","reload","catch","err","console","error","bind","moveToTop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,MAAIA,MAAM,IAAV;AAAA,MACEC,WAAW,IADb;;AAGO,MAAMC,sBAAO,SAAPA,IAAO,GAAM;AACxB,QAAI,CAACF,GAAL,EAAU;AACRA,YAAM,kBAAQG,iBAAR,CAA0B,qDAASC,IAAT,EAA1B,EAA2C;AAC/CC,eAAO,uBAAuBD,IAAvB,EADwC;AAE/CE,eAAO,GAFwC;AAG/CC,gBAAQ,GAHuC;AAI/CC,mBAAW,KAJoC;AAK/CC,qBAAa,KALkC;AAM/CC,qBAAa,KANkC;AAO/CC,qBAAa,KAPkC;AAQ/CC,kBAAU,IARqC;AAS/CC,uBAAe,KATgC;AAU/CC,eAAO,IAVwC;AAW/CC,0BAAkB,IAX6B;AAY/C,2BAAmB,MAZ4B;AAa/CC,eAAO,iBAAM;AACXf,mBAASgB,MAAT;AACAhB,qBAAW,IAAX;AACAD,cAAIkB,MAAJ,CAAW,SAAX;AACAlB,gBAAM,IAAN;AACD;AAlB8C,OAA3C,CAAN;AAoBA,UAAMmB,QAAQ;AACZC,mBAAW;AACTC,4BAAkB,CAAC,UAAD,EAAa,WAAb,EAA0B,cAA1B,CADT;AAETC,2BAAiB,CAAC,wCAAD,EAA2C,yCAA3C,EAAsF,+CAAtF,CAFR;;AAITC,oCAA0B,EAJjB;AAKTC,mCAAyB,EALhB;AAMTC,sCAA4B,EANnB;AAOTC,qCAA2B,EAPlB;AAQTC,0CAAgC,EARvB;AASTC,yCAA+B,EATtB;AAUTC,qCAA2B,EAVlB;AAWTC,oCAA0B,EAXjB;AAYTC,gDAAsC,EAZ7B;AAaTC,+CAAqC,EAb5B;AAcTC,gDAAsC,EAd7B;AAeTC,+CAAqC,EAf5B;;AAiBTC,qCAA2B,CAAC,cAAD,EAAiB,WAAjB,EAA8B,SAA9B,EAAyC,QAAzC,EAAmD,SAAnD,EAA8D,OAA9D,CAjBlB;AAkBTC,+BAAqB,EAlBZ;AAmBTC,iCAAuB,CAAC,SAAD,EAAY,WAAZ,EAAyB,UAAzB,CAnBd;AAoBTC,2BAAiB,EApBR;;AAsBTC,+BAAqB,CAAC,mBAAD,EAAsB,eAAtB,EAAuC,yBAAvC,EAAkE,SAAlE,EAA6E,OAA7E,CAtBZ;AAuBTC,yBAAe,EAvBN;;AAyBTC,4BAAkB,CAAC,mBAAD,EAAsB,mBAAtB,EAA2C,oBAA3C,EAAiE,qBAAjE,EAAwF,eAAxF,CAzBT;AA0BTC,sBAAY,EA1BH;;AA4BTC,iCAAuB,CAAC,oBAAD,EAAuB,qBAAvB,EAA8C,qBAA9C,EAAqE,uBAArE,EAA8F,iBAA9F,CA5Bd;AA6BTC,2BAAiB,EA7BR;;AA+BTC,4BAAkB,CAAC,oDAAD,EAAuD,UAAvD,EAAmE,eAAnE,EAAoF,QAApF,EAChB,0CADgB,EAC4B,4CAD5B,EAEhB,kDAFgB,EAEoC,4CAFpC,EAGhB,2DAHgB,EAG6C,cAH7C,EAG6D,qBAH7D,EAIhB,QAJgB,CA/BT;AAqCTC,sBAAY,EArCH;AAsCTC,oBAAU;AAtCD,SADC;AAyCZC,qBAAa,KAzCD;AA0CZC,kBAAU,oBAAM;AACd,iBAAO9B,MAAMC,SAAN,CAAgBG,wBAAhB,KAA6C,EAA7C,IAAmDJ,MAAMC,SAAN,CAAgBI,uBAAhB,KAA4C,EAA/F,IACLL,MAAMC,SAAN,CAAgBK,0BAAhB,KAA+C,EAD1C,IACgDN,MAAMC,SAAN,CAAgBM,yBAAhB,KAA8C,EAD9F,IAELP,MAAMC,SAAN,CAAgBO,8BAAhB,KAAmD,EAF9C,IAEoDR,MAAMC,SAAN,CAAgBQ,6BAAhB,KAAkD,EAFtG,IAGLT,MAAMC,SAAN,CAAgBS,yBAAhB,KAA8C,EAHzC,IAG+CV,MAAMC,SAAN,CAAgBU,wBAAhB,KAA6C,EAH5F,IAILX,MAAMC,SAAN,CAAgBW,oCAAhB,KAAyD,EAJpD,IAKLZ,MAAMC,SAAN,CAAgBY,mCAAhB,KAAwD,EALnD,IAMLb,MAAMC,SAAN,CAAgBa,oCAAhB,KAAyD,EANpD,IAOLd,MAAMC,SAAN,CAAgBc,mCAAhB,KAAwD,EAPnD,IAOyDf,MAAMC,SAAN,CAAgBgB,mBAAhB,KAAwC,EAPjG,IAQLjB,MAAMC,SAAN,CAAgB0B,UAAhB,KAA+B,EAR1B,IAQgC3B,MAAMC,SAAN,CAAgBkB,eAAhB,KAAoC,EARpE,IASLnB,MAAMC,SAAN,CAAgBoB,aAAhB,KAAkC,EAT7B,IASmCrB,MAAMC,SAAN,CAAgBsB,UAAhB,KAA+B,EATlE,IASwEvB,MAAMC,SAAN,CAAgBwB,eAAhB,KAAoC,EATnH;AAUD;AArDW,OAAd;AAuDAzB,YAAM+B,MAAN,GAAe,YAAM;AACnB/B,cAAM6B,WAAN,GAAoB7B,MAAM8B,QAAN,EAApB;AACA,YAAI9B,MAAM6B,WAAV,EAAuB;AACrB;AACD;AACD7B,cAAMC,SAAN,CAAgB2B,QAAhB,GAA2B,IAA3B;AACA,YAAMI,UAAU;AACdC,oCAA0B,CADZ;AAEd7B,oCAA0BJ,MAAMC,SAAN,CAAgBG,wBAF5B;AAGdC,mCAAyBL,MAAMC,SAAN,CAAgBI,uBAH3B;AAIdC,sCAA4BN,MAAMC,SAAN,CAAgBK,0BAJ9B;AAKdC,qCAA2BP,MAAMC,SAAN,CAAgBM,yBAL7B;AAMdC,0CAAgCR,MAAMC,SAAN,CAAgBO,8BANlC;AAOdC,yCAA+BT,MAAMC,SAAN,CAAgBQ,6BAPjC;AAQdC,qCAA2BV,MAAMC,SAAN,CAAgBS,yBAR7B;AASdC,oCAA0BX,MAAMC,SAAN,CAAgBU,wBAT5B;AAUdC,gDAAsCZ,MAAMC,SAAN,CAAgBW,oCAVxC;AAWdC,+CAAqCb,MAAMC,SAAN,CAAgBY,mCAXvC;AAYdC,gDAAsCd,MAAMC,SAAN,CAAgBa,oCAZxC;AAadC,+CAAqCf,MAAMC,SAAN,CAAgBc,mCAbvC;AAcdE,+BAAqBjB,MAAMC,SAAN,CAAgBgB,mBAdvB;AAedE,2BAAiBnB,MAAMC,SAAN,CAAgBkB,eAfnB;AAgBdE,yBAAerB,MAAMC,SAAN,CAAgBoB,aAhBjB;AAiBdE,sBAAYvB,MAAMC,SAAN,CAAgBsB,UAjBd;AAkBdE,2BAAiBzB,MAAMC,SAAN,CAAgBwB,eAlBnB;AAmBdE,sBAAY3B,MAAMC,SAAN,CAAgB0B;AAnBd,SAAhB;AAqBA,oCAAQO,IAAR,CAAaF,OAAb,EAAsBG,IAAtB,CAA2B,UAACC,IAAD,EAAU;AACnCtD,mBAASgB,MAAT;AACAhB,qBAAW,IAAX;AACAD,cAAIkB,MAAJ,CAAW,SAAX;AACAlB,gBAAM,IAAN;AACAwD,iBAAOC,QAAP,CAAgBC,MAAhB;AACD,SAND,EAMGC,KANH,CAMS,UAACC,GAAD,EAAS;AAChBC,kBAAQC,KAAR,CAAcF,GAAd;AACD,SARD;AASD,OApCD;AAqCA3D,iBAAW,sBAAG8D,IAAH,CAAQ/D,GAAR,EAAamB,KAAb,CAAX;AACAnB,UAAIkB,MAAJ,CAAW,MAAX;AACD,KAnHD,MAmHO;AACLlB,UAAIgE,SAAJ;AACD;AACF,GAvHM;;oBAyHQ;AACb9D;AADa,G","file":"financialassessment.js","sourcesContent":["import rv from 'common/rivetsExtra';\nimport $html from 'text!./financialassessment.html'\nimport $ from 'jquery';\nimport windows from 'windows/windows';\nimport _ from 'lodash';\nimport liveapi from 'websockets/binary_websockets';\nimport 'common/util';\nimport 'jquery-growl';\nimport 'css!./financialassessment.css'\n\nlet win = null,\n  win_view = null;\n\nexport const init = () => {\n  if (!win) {\n    win = windows.createBlankWindow($($html).i18n(), {\n      title: \"Financial Assessment\".i18n(),\n      width: 700,\n      height: 500,\n      resizable: false,\n      collapsable: false,\n      minimizable: false,\n      maximizable: false,\n      closable: true,\n      closeOnEscape: false,\n      modal: true,\n      ignoreTileAction: true,\n      'data-authorized': 'true',\n      close: () => {\n        win_view.unbind();\n        win_view = null;\n        win.dialog('destroy');\n        win = null\n      }\n    });\n    const state = {\n      financial: {\n        experience_array: ['0-1 year', '1-2 years', 'Over 3 years'],\n        frequency_array: ['0-5 transactions in the past 12 months', '6-10 transactions in the past 12 months', '40 transactions or more in the past 12 months'],\n\n        forex_trading_experience: '',\n        forex_trading_frequency: '',\n        indices_trading_experience: '',\n        indices_trading_frequency: '',\n        commodities_trading_experience: '',\n        commodities_trading_frequency: '',\n        stocks_trading_experience: '',\n        stocks_trading_frequency: '',\n        other_derivatives_trading_experience: '',\n        other_derivatives_trading_frequency: '',\n        other_instruments_trading_experience: '',\n        other_instruments_trading_frequency: '',\n\n        employment_industry_array: ['Construction', 'Education', 'Finance', 'Health', 'Tourism', 'Other'],\n        employment_industry: '',\n        education_level_array: ['Primary', 'Secondary', 'Tertiary'],\n        education_level: '',\n\n        income_source_array: ['Salaried Employee', 'Self-Employed', 'Investments & Dividends', 'Pension', 'Other'],\n        income_source: '',\n\n        net_income_array: ['Less than $25,000', '$25,000 - $50,000', '$50,001 - $100,000', '$100,001 - $500,000', 'Over $500,000'],\n        net_income: '',\n\n        estimated_worth_array: ['Less than $100,000', '$100,000 - $250,000', '$250,001 - $500,000', '$500,001 - $1,000,000', 'Over $1,000,000'],\n        estimated_worth: '',\n\n        occupation_array: [\"Chief Executives, Senior Officials and Legislators\", \"Managers\", \"Professionals\", \"Clerks\",\n          \"Personal Care, Sales and Service Workers\", \"Agricultural, Forestry and Fishery Workers\",\n          \"Craft, Metal, Electrical and Electronics Workers\", \"Plant and Machine Operators and Assemblers\",\n          \"Mining, Construction, Manufacturing and Transport Workers\", \"Armed Forces\", \"Government Officers\",\n          \"Others\"\n        ],\n        occupation: '',\n        disabled: false\n      },\n      empty_field: false,\n      validate: () => {\n        return state.financial.forex_trading_experience === '' || state.financial.forex_trading_frequency === '' ||\n          state.financial.indices_trading_experience === '' || state.financial.indices_trading_frequency === '' ||\n          state.financial.commodities_trading_experience === '' || state.financial.commodities_trading_frequency === '' ||\n          state.financial.stocks_trading_experience === '' || state.financial.stocks_trading_frequency === '' ||\n          state.financial.other_derivatives_trading_experience === '' ||\n          state.financial.other_derivatives_trading_frequency === '' ||\n          state.financial.other_instruments_trading_experience === '' ||\n          state.financial.other_instruments_trading_frequency === '' || state.financial.employment_industry === '' ||\n          state.financial.occupation === '' || state.financial.education_level === '' ||\n          state.financial.income_source === '' || state.financial.net_income === '' || state.financial.estimated_worth === '';\n      },\n    };\n    state.submit = () => {\n      state.empty_field = state.validate();\n      if (state.empty_field) {\n        return;\n      }\n      state.financial.disabled = true;\n      const request = {\n        set_financial_assessment: 1,\n        forex_trading_experience: state.financial.forex_trading_experience,\n        forex_trading_frequency: state.financial.forex_trading_frequency,\n        indices_trading_experience: state.financial.indices_trading_experience,\n        indices_trading_frequency: state.financial.indices_trading_frequency,\n        commodities_trading_experience: state.financial.commodities_trading_experience,\n        commodities_trading_frequency: state.financial.commodities_trading_frequency,\n        stocks_trading_experience: state.financial.stocks_trading_experience,\n        stocks_trading_frequency: state.financial.stocks_trading_frequency,\n        other_derivatives_trading_experience: state.financial.other_derivatives_trading_experience,\n        other_derivatives_trading_frequency: state.financial.other_derivatives_trading_frequency,\n        other_instruments_trading_experience: state.financial.other_instruments_trading_experience,\n        other_instruments_trading_frequency: state.financial.other_instruments_trading_frequency,\n        employment_industry: state.financial.employment_industry,\n        education_level: state.financial.education_level,\n        income_source: state.financial.income_source,\n        net_income: state.financial.net_income,\n        estimated_worth: state.financial.estimated_worth,\n        occupation: state.financial.occupation\n      }\n      liveapi.send(request).then((data) => {\n        win_view.unbind();\n        win_view = null;\n        win.dialog(\"destroy\");\n        win = null;\n        window.location.reload();\n      }).catch((err) => {\n        console.error(err);\n      })\n    }\n    win_view = rv.bind(win, state);\n    win.dialog(\"open\");\n  } else {\n    win.moveToTop();\n  }\n}\n\nexport default {\n  init\n}\n"]}