define(["common/rivetsExtra","text!./financialassessment.html","jquery","windows/windows","lodash","websockets/binary_websockets","common/util","jquery-growl","css!./financialassessment.css"],function(a,b,c,d,e,f){"use strict";function g(a){return a&&a.__esModule?a:{"default":a}}var h=g(a),i=g(b),j=g(c),k=g(d),l=(g(e),g(f)),m=null,n=null;l["default"].events.on("login",function(){var a=/MF/gi.test(local_storage.get("oauth")[0].id);a||l["default"].send({get_account_status:1}).then(function(a){var b=a.get_account_status.risk_classification;"high"===b&&l["default"].send({get_financial_assessment:1}).then(function(a){0===Object.keys(a.get_financial_assessment).length&&o()})})});var o=function(){if(m)m.moveToTop();else{m=k["default"].createBlankWindow(j["default"](i["default"]).i18n(),{title:"Financial Assessment".i18n(),width:700,height:500,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,closable:!1,closeOnEscape:!1,modal:!0,ignoreTileAction:!0,"data-authorized":"true",close:function(){n.unbind(),n=null,m.dialog("destroy"),m=null}});var a={financial:{experience_array:["0-1 year","1-2 years","Over 3 years"],frequency_array:["0-5 transactions in the past 12 months","6-10 transactions in the past 12 months","40 transactions or more in the past 12 months"],forex_trading_experience:"",forex_trading_frequency:"",indices_trading_experience:"",indices_trading_frequency:"",commodities_trading_experience:"",commodities_trading_frequency:"",stocks_trading_experience:"",stocks_trading_frequency:"",other_derivatives_trading_experience:"",other_derivatives_trading_frequency:"",other_instruments_trading_experience:"",other_instruments_trading_frequency:"",employment_industry_array:["Construction","Education","Finance","Health","Tourism","Other"],employment_industry:"",education_level_array:["Primary","Secondary","Tertiary"],education_level:"",income_source_array:["Salaried Employee","Self-Employed","Investments & Dividends","Pension","Other"],income_source:"",net_income_array:["Less than $25,000","$25,000 - $50,000","$50,001 - $100,000","$100,001 - $500,000","Over $500,000"],net_income:"",estimated_worth_array:["Less than $100,000","$100,000 - $250,000","$250,001 - $500,000","$500,001 - $1,000,000","Over $1,000,000"],estimated_worth:"",occupation_array:["Chief Executives, Senior Officials and Legislators","Managers","Professionals","Clerks","Personal Care, Sales and Service Workers","Agricultural, Forestry and Fishery Workers","Craft, Metal, Electrical and Electronics Workers","Plant and Machine Operators and Assemblers","Mining, Construction, Manufacturing and Transport Workers","Armed Forces","Government Officers","Others"],occupation:"",disabled:!1},empty_field:!1,validate:function(){return""===a.financial.forex_trading_experience||""===a.financial.forex_trading_frequency||""===a.financial.indices_trading_experience||""===a.financial.indices_trading_frequency||""===a.financial.commodities_trading_experience||""===a.financial.commodities_trading_frequency||""===a.financial.stocks_trading_experience||""===a.financial.stocks_trading_frequency||""===a.financial.other_derivatives_trading_experience||""===a.financial.other_derivatives_trading_frequency||""===a.financial.other_instruments_trading_experience||""===a.financial.other_instruments_trading_frequency||""===a.financial.employment_industry||""===a.financial.occupation||""===a.financial.education_level||""===a.financial.income_source||""===a.financial.net_income||""===a.financial.estimated_worth}};a.submit=function(){if(a.empty_field=a.validate(),!a.empty_field){a.financial.disabled=!0;var b={set_financial_assessment:1,forex_trading_experience:a.financial.forex_trading_experience,forex_trading_frequency:a.financial.forex_trading_frequency,indices_trading_experience:a.financial.indices_trading_experience,indices_trading_frequency:a.financial.indices_trading_frequency,commodities_trading_experience:a.financial.commodities_trading_experience,commodities_trading_frequency:a.financial.commodities_trading_frequency,stocks_trading_experience:a.financial.stocks_trading_experience,stocks_trading_frequency:a.financial.stocks_trading_frequency,other_derivatives_trading_experience:a.financial.other_derivatives_trading_experience,other_derivatives_trading_frequency:a.financial.other_derivatives_trading_frequency,other_instruments_trading_experience:a.financial.other_instruments_trading_experience,other_instruments_trading_frequency:a.financial.other_instruments_trading_frequency,employment_industry:a.financial.employment_industry,education_level:a.financial.education_level,income_source:a.financial.income_source,net_income:a.financial.net_income,estimated_worth:a.financial.estimated_worth,occupation:a.financial.occupation};l["default"].send(b).then(function(){n.unbind(),n=null,m.dialog("destroy"),m=null})["catch"](function(a){})}},n=h["default"].bind(m,a),m.dialog("open")}}});